"use strict";var S=Object.defineProperty;var lt=Object.getOwnPropertyDescriptor;var yt=Object.getOwnPropertyNames;var dt=Object.prototype.hasOwnProperty;var gt=(n,t)=>{for(var e in t)S(n,e,{get:t[e],enumerable:!0})},Pt=(n,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of yt(t))!dt.call(n,a)&&a!==e&&S(n,a,{get:()=>t[a],enumerable:!(o=lt(t,a))||o.enumerable});return n};var _t=n=>Pt(S({},"__esModule",{value:!0}),n);var wt={};gt(wt,{PKTAuthTokenResult:()=>D,PKTCounterAttackNotify:()=>B,PKTDeathNotify:()=>K,PKTInitEnv:()=>v,PKTInitPC:()=>h,PKTNewNpc:()=>L,PKTNewNpcSummon:()=>F,PKTNewPC:()=>M,PKTNewProjectile:()=>H,PKTParalyzationStateNotify:()=>Y,PKTPartyInfo:()=>G,PKTPartyLeaveResult:()=>W,PKTPartyStatusEffectAddNotify:()=>Z,PKTPartyStatusEffectRemoveNotify:()=>q,PKTPartyStatusEffectResultNotify:()=>J,PKTRaidBossKillNotify:()=>Q,PKTRaidResult:()=>X,PKTRemoveObject:()=>tt,PKTSkillDamageAbnormalMoveNotify:()=>ot,PKTSkillDamageNotify:()=>ut,PKTSkillStageNotify:()=>at,PKTSkillStartNotify:()=>st,PKTStatChangeOriginNotify:()=>ft,PKTStatusEffectAddNotify:()=>mt,PKTStatusEffectRemoveNotify:()=>ct,PKTStatusEffectSyncDataNotify:()=>kt,PKTTriggerBossBattleStatus:()=>bt,PKTTriggerFinishNotify:()=>pt,PKTTriggerStartNotify:()=>Ut});module.exports=_t(wt);var r=class{b;o;constructor(t){this.b=t,this.o=0}skip(t=0){this.o+=t}bool(){return this.u8()===1}u8(){return this.b.readUint8(this.o++)}i8(){return this.b.readInt8(this.o++)}u16(){let t=this.b.readUint16LE(this.o);return this.o+=2,t}i16(){let t=this.b.readInt16LE(this.o);return this.o+=2,t}u32(){let t=this.b.readUint32LE(this.o);return this.o+=4,t}i32(){let t=this.b.readInt32LE(this.o);return this.o+=4,t}f32(){let t=this.b.readFloatLE(this.o);return this.o+=4,t}u64(){let t=this.b.readBigUint64LE(this.o);return this.o+=8,t}i64(){let t=this.b.readBigInt64LE(this.o);return this.o+=8,t}string(t){let e=this.u16();if(e<=t){e=e*2;let o=this.b.toString("utf16le",this.o,this.o+e);return this.o+=e,o}return""}bytes(t=0,e,o){if(e&&t>e)return Buffer.alloc(0);o&&(t=t*o);let a=Buffer.from(this.b.subarray(this.o,this.o+t));return this.o+=t,a}array(t,e,o){return o&&t>o?[]:new Array(t).fill(void 0).map(e)}};function D(n){let t=new r(n),e={};return e.PacketResultCode=t.u32(),e.Unk1_m=t.bytes(t.u32(),688),e}function B(n){let t=new r(n),e={};return t.skip(2),e.TargetId=t.u64(),e.Type=t.u32(),e.SourceId=t.u64(),e}function K(n){let t=new r(n),e={};return e.Unk0=t.u32(),e.SourceId=t.u64(),t.bool()&&(e.Unk2_0=t.u8()),e.Unk3=t.u8(),t.bool()&&(e.Unk4_0=t.u8()),e.TargetId=t.u64(),e.Unk6=t.u64(),e.Unk7=t.u16(),t.bool()&&(e.Unk8_0=t.u8()),e}var St=[0,31,28,31,30,31,30,31,31,30,31,30,31];function xt(n){return!(n%4||!(n%100)&&n%400)}function It(n,t,e){if(n>99){if(n<1752||n==1752&&(t<9||t==9&&e<<14))return!1}else n+=1900;return e>0&&t<=12&&(e<=St[t]||e==29&&t==2&&xt(n))}function E(n){let t=Number(n&0xffffffffn),e=Number(n>>32n&0xffffffffn),o=t&4095,a=(t&65535)>>12,y=t>>16&31;It(o,a,y)||(o=a=y=0);let d=t>>21&31,g=t>>26&63,P=e&63,_=e>>6&16383;return d<24&&g<60&&P<60&&_<1e3||(d=24,g=P=_=0),new Date(Date.UTC(o<=99?o+1900:o,a-1,y,d,g,P,_))}function c(n){let t=n.u16();return(t&4095)<2079?(n.o-=2,E(n.i64())):E(BigInt(t)&0xfffn|0x11000n)}function v(n){let t=new r(n),e={};return e.Unk0=t.u8(),e.PlayerId=t.u64(),e.lostArkDateTime=c(t),e.Unk3=t.u32(),e.Unk4=t.u32(),e.Unk5=t.u64(),e.struct_544=t.string(128),e.struct_26=t.array(t.u16(),()=>{let o={};return o.struct_544=t.string(128),o.versionString=t.string(64),o.struct_531=t.string(32),o},64),e}function Tt(n){if(n.length===0)return 0n;if(n.length>8)throw new Error("Value is too large");let t=Buffer.alloc(8);return n.copy(t),t.readBigInt64LE()}function u(n){let t=n.u8(),e=n.bytes(t>>1&7),o=Tt(e)<<4n|BigInt(t>>4);return(t&1)===0?o:-o}function i(n){let t={};return t.SourceId=n.u64(),t.Unk1=n.u32(),t.Unk2=n.u8(),t.lostArkDateTime=c(n),t.SkillLevel=n.u8(),t.StatusEffectId=n.u32(),t.struct_422=n.bytes(n.u16(),8,7),t.InstanceId=n.u64(),n.bool()&&(t.Value=n.bytes(16)),n.bool()&&(t.Unk9_0=n.u64()),t.EffectInstanceId=n.u32(),t}function k(n){let t={};return t.Unk0=n.u64(),t.Unk1=u(n),t.Unk2=n.u8(),t.Unk3=n.u16(),t.Unk4=u(n),t.Unk5=n.u8(),t.Unk6=n.u8(),t}function h(n){let t=new r(n),e={};return e.Unk0=t.bytes(25),e.Unk1=t.u16(),e.Unk2=t.u32(),e.ClassId=t.u16(),e.Unk4=t.u64(),e.Unk5=t.u32(),e.Unk6=t.u8(),e.Unk7=t.u16(),e.Unk8=t.u16(),t.skip(66),e.Level=t.u16(),t.skip(44),e.statPair=t.array(t.u16(),()=>{let o={};return o.readNBytesInt64=u(t),o.Unk0_0_1=t.u8(),o},152),e.Unk11=t.u32(),e.Unk12=t.u8(),e.Unk13=t.u16(),e.Unk14=t.u32(),e.Unk15=t.u8(),e.statusEffectDatas=t.array(t.u16(),()=>i(t),80),e.Unk17=t.u8(),e.struct_325=t.bytes(t.u16(),104,30),e.Unk19=t.u64(),e.Unk20=t.u32(),e.Unk21=t.u8(),e.Unk22=t.u8(),e.Unk23=t.u32(),e.Unk24=t.u8(),e.Unk25=t.u32(),e.Unk26=t.u8(),e.Unk27=t.u8(),e.PlayerId=t.u64(),e.Unk29=t.u16(),e.Name=t.string(20),e.Unk31=t.u8(),e.Unk32=t.u32(),e.Unk33=t.u8(),e.struct_373=t.array(t.u16(),()=>k(t),5),e.Unk35=t.u8(),t.bool()&&(e.Unk36_0=t.u32()),e.Unk37=t.u32(),e.Unk38=t.u8(),e.Unk39=t.u64(),e.CharacterId=t.u64(),e.struct_320=t.string(7),e.Unk42=t.u8(),e.Unk43=t.u8(),e.Unk44=t.u32(),e.struct_219=t.bytes(t.u16(),3,17),e.Unk46=t.u64(),e.Unk47=t.u8(),e.Unk48=t.u8(),e.Unk49=t.u32(),e.GearLevel=t.u32(),e.Unk51=t.u8(),e.struct_92=t.bytes(t.u16(),57),e.Unk53=t.bytes(35),e.Unk54=t.u8(),e.Unk55=t.u8(),e.Unk56=t.u32(),e}function p(n){let t={};return t.Unk0=n.u16(),t.Unk1=n.u32(),t.Unk2=n.u16(),t.lostArkDateTime=c(n),n.bool()&&(t.Unk4_0=n.u8()),t.struct_429=n.bytes(n.u16(),3,14),t}function w(n){let t={};return t.Unk0=n.u16(),t.Unk1=n.u8(),t.Unk2=n.u64(),t.struct_85=n.bytes(n.u32(),512),t.lostArkString=n.string(20),t.struct_301=n.array(n.u16(),()=>p(n),30),t.Unk6=n.u8(),t.Unk7=n.u8(),t}function T(n){return n>>20===1?-((~n>>>0)+1&2097151):n}function s(n){let t=n.u64();return{x:T(Number(t&0x1fffffn)),y:T(Number(t>>21n&0x1fffffn)),z:T(Number(t>>42n&0x1fffffn))}}function m(n){return n.u16()*(2*Math.PI)/65536}function U(n){let t={};return n.bool()&&(t.struct_675=w(n)),n.bool()&&(t.TransitIndex=n.u32()),t.Unk2=n.u8(),n.bool()&&(t.struct_321=n.bytes(n.u16(),11,9)),t.ObjectId=n.u64(),t.SpawnIndex=n.i32(),t.statusEffectDatas=n.array(n.u16(),()=>i(n),80),t.Unk7=n.u8(),t.Position=s(n),n.bool()&&(t.Unk9_0=n.u32()),t.Unk10=n.u8(),n.bool()&&(t.Unk11_0=n.u32()),n.bool()&&(t.struct_255=n.bytes(n.u16(),12,12)),t.Unk13=n.u8(),t.Unk14=n.u16(),t.TypeId=n.u32(),n.bool()&&(t.Unk16_0=n.u16()),n.bool()&&(t.Unk17_0=n.u32()),t.DirectionYaw=m(n),n.bool()&&(t.Unk19_0=n.u8()),n.bool()&&(t.Unk20_0=n.u8()),n.bool()&&(t.Unk21_0=n.u8()),t.Unk22=n.u8(),n.bool()&&(t.Unk23_0=n.u8()),t.statPair=n.array(n.u16(),()=>{let e={};return e.readNBytesInt64=u(n),e.Unk0_0_1=n.u8(),e},152),n.bool()&&(t.Unk25_0=n.u64()),n.bool()&&(t.Unk26_0=n.u16()),n.bool()&&(t.Unk27_0=n.u8()),t.Unk28=n.u8(),n.bool()&&(t.Unk29_0=n.u32()),n.bool()&&(t.Unk30_0=n.u8()),t.struct_373=n.array(n.u16(),()=>k(n),5),n.bool()&&(t.Unk32_0=n.u8()),t}function L(n){let t=new r(n),e={};return t.bool()&&(e.Unk0_0=t.u8()),t.bool()&&(e.Unk1_0=t.u64()),e.NpcStruct=U(t),e.Unk3=t.u8(),e}function F(n){let t=new r(n),e={};return e.PublishReason=t.u8(),t.skip(9),e.OwnerId=t.u64(),t.skip(22),e.NpcData=U(t),e}function O(n){let t={};return t.Unk0=n.u32(),t.Unk1=n.u32(),t.Unk2=n.bytes(12),n.bool()&&(t.Unk3_0=n.bytes(12)),t}function j(n){let t={};return t.Unk0=n.string(20),t.Unk1=n.u16(),t.Unk2=n.u8(),t.Unk3=n.u32(),t.Unk5_m=n.u32(),n.bool()&&(t.Unk5_0=n.bytes(12)),t.Unk6=n.u8(),t.struct_373=n.array(n.u16(),()=>k(n),5),t.struct_301=n.array(n.u16(),()=>p(n),30),t.Unk9=n.u8(),t.Unk10=n.u16(),t.GearLevel=n.u32(),t.struct_3=n.array(n.u16(),()=>{let e={};return e.struct_102=n.bytes(n.u16(),5,4),e.Unk0_0_1=n.u32(),e},200),t.Unk13=n.u8(),t.Unk14=n.u8(),t.Unk15=n.u8(),t.Unk16=n.u32(),t.Unk17=n.u8(),t.Level=n.u16(),t.struct_85=n.bytes(n.u32(),512),t.Unk20=n.u8(),t.Unk21=n.u8(),t.Unk22=n.u32(),t.Heading=m(n),t.Unk24=n.u64(),t.Unk25=n.u8(),t.CharacterId=n.u64(),t.struct_300=n.array(n.u16(),()=>p(n),9),t.Unk28=n.u32(),t.Unk29=n.u8(),t.struct_118=n.bytes(n.u16(),200,4),t.ClassId=n.u16(),t.Unk32=n.u32(),t.Unk33=n.bytes(5),t.Name=n.string(20),t.Unk35=n.u32(),t.Unk36=n.u32(),t.statPair=n.array(n.u16(),()=>{let e={};return e.readNBytesInt64=u(n),e.Unk0_0_1=n.u8(),e},152),t.Unk38=n.bytes(25),t.Unk39=n.u8(),t.Unk40=n.u16(),t.Unk41=n.u32(),t.statusEffectDatas=n.array(n.u16(),()=>i(n),80),t.PlayerId=n.u64(),t}function M(n){let t=new r(n),e={};return t.bool()&&(e.TrackMoveInfo=O(t)),t.bool()&&(e.Unk5_0_m=t.bytes(20)),e.Unk2_m=t.u8(),t.bool()&&(e.Unk3_0_m=t.u32()),e.Unk0_m=t.u8(),t.bool()&&(e.Unk4_0_m=t.bytes(12)),e.PCStruct=j(t),e}function V(n){let t={};return t.Unk0=n.u16(),t.ProjectileId=n.u64(),t.Unk2=n.u32(),t.Unk3=n.u8(),n.bool()&&(t.Unk4_0=n.u32()),n.bool()&&(t.struct_321=n.bytes(n.u16(),11,9)),t.Unk6=n.u32(),t.Unk7=n.u32(),t.SkillEffect=n.u32(),t.Tripods=n.bytes(3),t.Unk10=n.u64(),t.Unk11=n.u32(),t.SkillLevel=n.u8(),t.Unk13=n.bytes(6),t.Unk14=n.u64(),t.Unk15=n.u8(),t.Unk16=n.u16(),n.bool()&&(t.Unk17_0=n.u64()),t.Unk18=n.u64(),t.SkillId=n.u32(),t.OwnerId=n.u64(),t}function H(n){let t=new r(n),e={};return e.projectileInfo=V(t),e}function Y(n){let t=new r(n),e={};return e.Unk0=t.bytes(30),e}function z(n){let t={};return t.CharacterLevel=n.u16(),t.Unk1=n.u8(),t.Unk2=n.u64(),t.Unk3=n.u8(),t.Unk4=n.u32(),t.Unk5=n.u16(),t.Unk6=u(n),t.Name=n.string(20),t.PartyMemberNumber=n.u8(),t.Unk9=n.u64(),t.Unk10=u(n),t.CharacterId=n.u64(),t.Unk12=n.u8(),t.Unk13=n.u8(),t.Unk14=n.u8(),t.Unk15=n.u8(),t.Unk16=n.u32(),t.Unk17=n.u32(),t.Unk18=n.u8(),t.Unk19=n.u16(),t}function G(n){let t=new r(n),e={};return e.PartyInstanceId=t.u32(),e.MemberDatas=t.array(t.u16(),()=>z(t),40),e.PartyType=t.u8(),e.RaidInstanceId=t.u32(),e.LootGrade=t.u32(),e.PartyLootType=t.u8(),e}function W(n){let t=new r(n),e={};return e.PartyInstanceId=t.u32(),e.Name=t.string(20),e.PartyLeaveType=t.u8(),e}function Z(n){let t=new r(n),e={};return e.statusEffectDatas=t.array(t.u16(),()=>i(t),80),e.PlayerIdOnRefresh=t.u64(),e.CharacterId=t.u64(),e.Unk3=t.u64(),e.Unk4=t.u8(),e}function q(n){let t=new r(n),e={};return e.Unk0=t.u64(),e.Unk1=t.u8(),e.CharacterId=t.u64(),e.statusEffectIds=t.array(t.u16(),()=>t.u32(),80),e}function J(n){let t=new r(n),e={};return e.CharacterId=t.u64(),t.skip(1),e.RaidInstanceId=t.u32(),t.skip(25),e.PartyInstanceId=t.u32(),t.skip(1),e}function Q(n){let t=new r(n),e={};return e.Unk0=t.bytes(5),e}function X(n){let t=new r(n),e={};return e.Unk0=t.u8(),e.Unk1=t.u64(),e.Unk2=t.u8(),e.Unk3=t.u64(),e.Unk4=t.u8(),e.struct_44=t.array(t.u16(),()=>{let o={};return o.struct_493=t.bytes(t.u16(),3),o.Unk0_0_1=u(t),o.Unk0_0_2=t.u32(),o.Unk0_0_3=u(t),o},3),e.Unk6=t.u64(),e.Unk7=t.u64(),e}function $(n){let t={};return t.UnpublishReason=n.u8(),t.ObjectId=n.u64(),t}function tt(n){let t=new r(n),e={};return e.unpublishedObjects=t.array(t.u16(),()=>$(t),200),e}function nt(n){let t={},e=n.u8();return e&1&&(t.flag1=n.u32()),e&2&&(t.flag2=n.u32()),e&4&&(t.flag4=n.u32()),e&8&&(t.flag8=n.u32()),e&16&&(t.flag10=n.u32()),e&32&&(t.flag20=n.u32()),e&64&&(t.flag40=n.bytes(n.u16(),6)),t}function l(n){let t={};return t.CurHp=u(n),t.TargetId=n.u64(),t.MaxHp=u(n),n.bool()&&(t.DamageAttr=n.u8()),t.DamageType=n.u8(),t.Unk3_m=n.i16(),t.Modifier=n.u8(),t.Damage=u(n),t}function rt(n){let t={};return t.Unk0_m=nt(n),t.Unk8_m=n.u16(),t.Unk2_m=n.u64(),t.Destination=s(n),t.Unk4_m=n.u16(),t.skillDamageEvent=l(n),t.Position=s(n),t.Unk3_m=n.u16(),t.Unk1_m=n.u8(),t}function ot(n){let t=new r(n),e={};return e.Unk2_m=t.u32(),e.SourceId=t.u64(),e.Unk1_m=t.u8(),e.SkillDamageAbnormalMoveEvents=t.array(t.u16(),()=>rt(t),50),e.SkillEffectId=t.u32(),e.SkillId=t.u32(),e}function ut(n){let t=new r(n),e={};return e.SkillDamageEvents=t.array(t.u16(),()=>l(t),50),e.SkillId=t.u32(),e.SourceId=t.u64(),e.SkillLevel=t.u8(),e.SkillEffectId=t.u32(),e}function at(n){let t=new r(n),e={};return t.skip(29),e.SourceId=t.u64(),t.skip(4),e.Stage=t.u8(),t.skip(8),e.SkillId=t.u32(),e}function it(n){let t={},e=n.u8();return e&1&&(t.flag1=n.u8()),e&2&&(t.flag2=n.u8()),e&4&&(t.flag4=n.u32()),e&8&&(t.flag8=n.u32()),e&16&&(t.flag10=n.u32()),e&32&&(t.flag20=n.bytes(3)),e&64&&(t.flag40=n.bytes(6)),t}function st(n){let t=new r(n),e={};return e.AimTargetPosition=s(t),e.CurPosition=s(t),e.CurDirectionYaw=m(t),t.bool()&&(e.PitchRotation=m(t)),e.SkillId=t.u32(),e.NewPosition=s(t),e.SourceId=t.u64(),t.bool()&&(e.Unk1_m=t.i32()),e.SkillOptionData=it(t),t.bool()&&(e.AiStateId=t.u32()),e.SkillLevel=t.u8(),e.NewDirectionYaw=m(t),e}function ft(n){let t=new r(n),e={};return e.StatPairList=t.array(t.u16(),()=>{let o={};return o.readNBytesInt64=u(t),o.Unk0_0_1=t.u8(),o},152),e.Unk1=t.array(t.u16(),()=>{let o={};return o.readNBytesInt64=u(t),o.Unk0_0_1=t.u8(),o},152),e.Unk2=t.u8(),t.bool()&&(e.Unk3_0=t.u32()),e.ObjectId=t.u64(),e}function mt(n){let t=new r(n),e={};return e.ObjectId=t.u64(),t.bool()&&(e.Unk1_0=t.u64()),e.statusEffectData=i(t),e.Unk3=t.u64(),e.New=t.bool(),e}function ct(n){let t=new r(n),e={};return e.statusEffectIds=t.array(t.u16(),()=>t.u32(),80),e.Reason=t.u8(),e.ObjectId=t.u64(),e}function kt(n){let t=new r(n),e={};return e.ObjectId=t.u64(),t.skip(1),e.EffectInstanceId=t.u32(),t.skip(4),e.Value=t.u32(),e.CharacterId=t.u64(),t.skip(1),e}function bt(n){let t=new r(n),e={};return e.Unk2_m=t.bool(),e.Step=t.u32(),e.TriggerId=t.u32(),t.skip(1),e}function pt(n){let t=new r(n),e={};return e.TriggerId=t.u32(),e.PacketResultCode=t.u32(),e.Unk0_m=t.u32(),e.InvolvedPCs=t.array(t.u16(),()=>t.u64(),40),e}function Ut(n){let t=new r(n),e={};return e.TriggerId=t.u32(),e.InvolvedPCs=t.array(t.u16(),()=>t.u64(),40),e.SourceId=t.u64(),e.TriggerSignalType=t.u32(),e}0&&(module.exports={PKTAuthTokenResult,PKTCounterAttackNotify,PKTDeathNotify,PKTInitEnv,PKTInitPC,PKTNewNpc,PKTNewNpcSummon,PKTNewPC,PKTNewProjectile,PKTParalyzationStateNotify,PKTPartyInfo,PKTPartyLeaveResult,PKTPartyStatusEffectAddNotify,PKTPartyStatusEffectRemoveNotify,PKTPartyStatusEffectResultNotify,PKTRaidBossKillNotify,PKTRaidResult,PKTRemoveObject,PKTSkillDamageAbnormalMoveNotify,PKTSkillDamageNotify,PKTSkillStageNotify,PKTSkillStartNotify,PKTStatChangeOriginNotify,PKTStatusEffectAddNotify,PKTStatusEffectRemoveNotify,PKTStatusEffectSyncDataNotify,PKTTriggerBossBattleStatus,PKTTriggerFinishNotify,PKTTriggerStartNotify});
