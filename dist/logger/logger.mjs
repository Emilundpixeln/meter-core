import{a as na}from"../chunk-ZGEJ7KGT.mjs";import{$ as ti,A as Da,B as ka,C as Aa,D as La,E as ha,F as Ca,G as Ka,H as Ma,I as wa,J as Wa,K as Oa,L as ja,M as Ba,N as Fa,O as Ua,P as Za,Q as Va,R as _a,S as Ha,T as Ga,U as za,V as Ya,W as $a,X as qa,Y as Ja,Z as Qa,_ as Xa,a as sa,aa as ei,b as fa,ba as oi,c as ua,ca as ai,d as ma,da as ii,e as la,ea as ri,f as ya,fa as ni,g as ca,ga as si,h as pa,ha as fi,i as da,ia as ui,j as ga,ja as mi,k as Sa,l as Na,la as li,m as i,n as r,o as Ia,p as ba,q as Pa,r as l,s as y,t as p,u as d,v as xa,w as Ea,x as va,y as Ta,z as Ra}from"../chunk-PRRI7C4G.mjs";import"../chunk-K7C7TUE5.mjs";import{TypedEmitter as zi}from"tiny-typed-emitter";function S(t,e){let o={};return o.Points=t.u16(),o.Id=t.u32(),o.Level=t.u8(),o}function N(t,e){t.u16(e.Points),t.u32(e.Id),t.u8(e.Level)}function Rt(t,e){let o={};return o.abilityDataList=t.array(t.u16(),()=>S(t,e),100),o}function Dt(t,e){t.array(e.abilityDataList,{maxLen:100,lenType:"u16"},o=>{N(t,o)})}var P=0,kt="AbilityChangeNotify";function yi(t,e){let o={};return o.FeatureType=t.u16(),o.Level=t.u32(),o}function ci(t,e){t.u16(e.FeatureType),t.u32(e.Level)}function At(t,e){let o={};return o.activeAbilityList=t.array(t.u16(),()=>yi(t,e),60),o.ObjectId=t.u64(),o}function Lt(t,e){t.array(e.activeAbilityList,{maxLen:60,lenType:"u16"},o=>{ci(t,o)}),t.u64(e.ObjectId)}var x=1,ht="ActiveAbilityNotify";function Ct(t,e){let o={};return o.ObjectId=t.u64(),o.addonSkillFeatureList=t.array(t.u16(),()=>{let a={};return a.addonSkillFeatureIdList=t.array(t.u16(),()=>t.u32(),5),a.SkillId=t.u32(),a},200),o}function Kt(t,e){t.u64(e.ObjectId),t.array(e.addonSkillFeatureList,{maxLen:200,lenType:"u16"},o=>{t.array(o.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},a=>{t.u32(a)}),t.u32(o.SkillId)})}var E=2,Mt="AddonSkillFeatureChangeNotify";function wt(t,e){let o={};return o.ParalyzationMaxPoint=t.u32(),o.Type=t.u8(),o.ObjectId=t.u64(),o.ParalyzationPoint=t.u32(),o}function Wt(t,e){t.u32(e.ParalyzationMaxPoint),t.u8(e.Type),t.u64(e.ObjectId),t.u32(e.ParalyzationPoint)}var v=4,Ot="BlockSkillStateNotify";function jt(t,e){let o={};return o.SourceId=t.u64(),o.TargetId=t.u64(),o.Type=t.u32(),o}function Bt(t,e){t.u64(e.SourceId),t.u64(e.TargetId),t.u32(e.Type)}var T=5,Ft="CounterAttackNotify";function Ut(t,e){let o={};return o.SourceId=t.u64(),o.TargetId=t.u64(),o}function Zt(t,e){t.u64(e.SourceId),t.u64(e.TargetId)}var R=6,Vt="DeathNotify";function _t(t,e){let o={};return o.abilityDataList=t.array(t.u16(),()=>S(t,e),100),o}function Ht(t,e){t.array(e.abilityDataList,{maxLen:100,lenType:"u16"},o=>{N(t,o)})}var D=7,Gt="InitAbility";function zt(t,e){let o={};return o.PlayerId=t.u64(),o}function Yt(t,e){t.u64(e.PlayerId)}var k=8,$t="InitEnv";function n(t,e){let o={};return o.SkillLevel=t.u8(),o.OccurTime=ga(t,e),o.StatusEffectId=t.u32(),o.SourceId=t.u64(),o.TotalTime=t.u32(),o.EndTick=t.u64(),t.bool()&&(o.Value=t.bytes(16)),o.EffectInstanceId=t.u32(),o}function s(t,e){t.u8(e.SkillLevel),Sa(t,e.OccurTime),t.u32(e.StatusEffectId),t.u64(e.SourceId),t.u32(e.TotalTime),t.u64(e.EndTick),t.bool(e.Value!==void 0)&&t.bytes(e.Value,{length:16}),t.u32(e.EffectInstanceId)}function qt(t,e){let o={};return o.statPair=t.array(t.u16(),()=>{let a={};return a.StatType=t.u8(),a.Value=i(t,e),a},152),o.Name=t.string(20),o.Level=t.u16(),o.statusEffectDatas=t.array(t.u16(),()=>n(t,e),80),o.CharacterId=t.u64(),o.GearLevel=t.u32(),o.PlayerId=t.u64(),o.ClassId=t.u16(),o}function Jt(t,e){t.array(e.statPair,{maxLen:152,lenType:"u16"},o=>{t.u8(o.StatType),r(t,o.Value)}),t.string(e.Name,20),t.u16(e.Level),t.array(e.statusEffectDatas,{maxLen:80,lenType:"u16"},o=>{s(t,o)}),t.u64(e.CharacterId),t.u32(e.GearLevel),t.u64(e.PlayerId),t.u16(e.ClassId)}var A=9,Qt="InitPC";function Xt(t,e){let o={};return o.statPair=t.array(t.u16(),()=>{let a={};return a.StatType=t.u8(),a.Value=i(t,e),a},152),o.statusEffectDatas=t.array(t.u16(),()=>n(t,e),80),o.addonSkillFeatureList=t.array(t.u16(),()=>{let a={};return a.addonSkillFeatureIdList=t.array(t.u16(),()=>t.u32(),5),a.SkillId=t.u32(),a},200),o.abilityDataList=t.array(t.u16(),()=>S(t,e),100),o}function te(t,e){t.array(e.statPair,{maxLen:152,lenType:"u16"},o=>{t.u8(o.StatType),r(t,o.Value)}),t.array(e.statusEffectDatas,{maxLen:80,lenType:"u16"},o=>{s(t,o)}),t.array(e.addonSkillFeatureList,{maxLen:200,lenType:"u16"},o=>{t.array(o.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},a=>{t.u32(a)}),t.u32(o.SkillId)}),t.array(e.abilityDataList,{maxLen:100,lenType:"u16"},o=>{N(t,o)})}var L=10,ee="InitLocal";function oe(t,e){let o={};return o.Account_CharacterId1=t.u64(),o.ServerAddr=t.string(256),o.Account_CharacterId2=t.u64(),o}function ae(t,e){t.u64(e.Account_CharacterId1),t.string(e.ServerAddr,256),t.u64(e.Account_CharacterId2)}var h=11,ie="MigrationExecute";function dt(t,e){let o={};return o.SpawnIndex=t.u32(),o.ObjectId=t.u64(),t.bool()&&(o.TransitIndex=t.u32()),o.Position=l(t,e),o.statusEffectDatas=t.array(t.u16(),()=>n(t,e),80),o.DirectionYaw=p(t,e),o.statPair=t.array(t.u16(),()=>{let a={};return a.StatType=t.u8(),a.Value=i(t,e),a},152),o.TypeId=t.u32(),o}function gt(t,e){t.u32(e.SpawnIndex),t.u64(e.ObjectId),t.bool(e.TransitIndex!==void 0)&&t.u32(e.TransitIndex),y(t,e.Position),t.array(e.statusEffectDatas,{maxLen:80,lenType:"u16"},o=>{s(t,o)}),d(t,e.DirectionYaw),t.array(e.statPair,{maxLen:152,lenType:"u16"},o=>{t.u8(o.StatType),r(t,o.Value)}),t.u32(e.TypeId)}function ne(t,e){let o={};return o.NpcStruct=dt(t,e),o}function se(t,e){gt(t,e.NpcStruct)}var C=12,fe="NewNpc";function ue(t,e){let o={};return o.PublishReason=t.u8(),o.OwnerId=t.u64(),o.NpcData=dt(t,e),o}function me(t,e){t.u8(e.PublishReason),t.u64(e.OwnerId),gt(t,e.NpcData)}var K=13,le="NewNpcSummon";function gi(t,e){let o={};return o.GearLevel=t.u32(),o.statPair=t.array(t.u16(),()=>{let a={};return a.StatType=t.u8(),a.Value=i(t,e),a},152),o.Name=t.string(20),o.Heading=p(t,e),o.CharacterId=t.u64(),o.PlayerId=t.u64(),o.addonSkillFeatureList=t.array(t.u16(),()=>{let a={};return a.addonSkillFeatureIdList=t.array(t.u16(),()=>t.u32(),5),a.SkillId=t.u32(),a},200),o.ClassId=t.u16(),o.Level=t.u16(),o.statusEffectDatas=t.array(t.u16(),()=>n(t,e),80),o}function Si(t,e){t.u32(e.GearLevel),t.array(e.statPair,{maxLen:152,lenType:"u16"},o=>{t.u8(o.StatType),r(t,o.Value)}),t.string(e.Name,20),d(t,e.Heading),t.u64(e.CharacterId),t.u64(e.PlayerId),t.array(e.addonSkillFeatureList,{maxLen:200,lenType:"u16"},o=>{t.array(o.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},a=>{t.u32(a)}),t.u32(o.SkillId)}),t.u16(e.ClassId),t.u16(e.Level),t.array(e.statusEffectDatas,{maxLen:80,lenType:"u16"},o=>{s(t,o)})}function ye(t,e){let o={};return o.PCStruct=gi(t,e),o}function ce(t,e){Si(t,e.PCStruct)}var M=14,pe="NewPC";function Ni(t,e){let o={};return o.tripodIndex=Ta(t,e),o.ChainSkillEffect=t.u32(),o.SkillEffect=t.u32(),o.SkillId=t.u32(),o.TargetObjectId=t.u64(),o.OwnerId=t.u64(),o.SkillLevel=t.u8(),o.ProjectileId=t.u64(),o.tripodLevel=Da(t,e),o}function Ii(t,e){Ra(t,e.tripodIndex),t.u32(e.ChainSkillEffect),t.u32(e.SkillEffect),t.u32(e.SkillId),t.u64(e.TargetObjectId),t.u64(e.OwnerId),t.u8(e.SkillLevel),t.u64(e.ProjectileId),ka(t,e.tripodLevel)}function de(t,e){let o={};return o.projectileInfo=Ni(t,e),o}function ge(t,e){Ii(t,e.projectileInfo)}var w=15,Se="NewProjectile";function Ne(t,e){let o={};return o.Enable=t.bool(),o.ParalyzationPoint=t.u32(),o.DecreasePoint=t.u32(),o.ParalyzationMaxPoint=t.u32(),o.NoHitCheckTime=t.u32(),o.HitCheckTime=t.u32(),o.ObjectId=t.u64(),o}function Ie(t,e){t.bool(e.Enable),t.u32(e.ParalyzationPoint),t.u32(e.DecreasePoint),t.u32(e.ParalyzationMaxPoint),t.u32(e.NoHitCheckTime),t.u32(e.HitCheckTime),t.u64(e.ObjectId)}var W=16,be="ParalyzationStateNotify";function bi(t,e){let o={};return o.MaxHp=i(t,e),o.CharacterId=t.u64(),o.Position=l(t,e),o.TransitIndex=t.u32(),o.CurHp=i(t,e),o.CharacterLevel=t.u16(),o.GearLevel=t.u32(),o.ZoneId=t.u32(),o.PartyMemberNumber=t.u8(),o.Name=t.string(20),o.ZoneInstId=t.u64(),o.WorldId=t.u8(),o.ClassId=t.u16(),o.Auths=t.u8(),o}function Pi(t,e){r(t,e.MaxHp),t.u64(e.CharacterId),y(t,e.Position),t.u32(e.TransitIndex),r(t,e.CurHp),t.u16(e.CharacterLevel),t.u32(e.GearLevel),t.u32(e.ZoneId),t.u8(e.PartyMemberNumber),t.string(e.Name,20),t.u64(e.ZoneInstId),t.u8(e.WorldId),t.u16(e.ClassId),t.u8(e.Auths)}function Pe(t,e){let o={};return o.RaidInstanceId=t.u32(),o.LootGrade=t.u32(),o.PartyType=t.u8(),o.PartyInstanceId=t.u32(),o.PartyLootType=t.u8(),o.MemberDatas=t.array(t.u16(),()=>bi(t,e),40),o}function xe(t,e){t.u32(e.RaidInstanceId),t.u32(e.LootGrade),t.u8(e.PartyType),t.u32(e.PartyInstanceId),t.u8(e.PartyLootType),t.array(e.MemberDatas,{maxLen:40,lenType:"u16"},o=>{Pi(t,o)})}var O=17,Ee="PartyInfo";function ve(t,e){let o={};return o.PartyLeaveType=t.u8(),o.PartyInstanceId=t.u32(),o.Name=t.string(20),o}function Te(t,e){t.u8(e.PartyLeaveType),t.u32(e.PartyInstanceId),t.string(e.Name,20)}var j=18,Re="PartyLeaveResult";function De(t,e){let o={};return o.ObjectId=t.u64(),o.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),o.Unk0_m=t.u8(),o}function ke(t,e){t.u64(e.ObjectId),t.array(e.passiveStatusEffectList,{maxLen:10,lenType:"u16"},o=>{t.u32(o)}),t.u8(e.Unk0_m)}var B=19,Ae="PartyPassiveStatusEffectAddNotify";function Le(t,e){let o={};return o.ObjectId=t.u64(),o.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),o}function he(t,e){t.u64(e.ObjectId),t.array(e.passiveStatusEffectList,{maxLen:10,lenType:"u16"},o=>{t.u32(o)})}var F=20,Ce="PartyPassiveStatusEffectRemoveNotify";function Ke(t,e){let o={};return o.CharacterId=t.u64(),o.statusEffectDatas=t.array(t.u16(),()=>n(t,e),80),o.PlayerIdOnRefresh=t.u64(),o}function Me(t,e){t.u64(e.CharacterId),t.array(e.statusEffectDatas,{maxLen:80,lenType:"u16"},o=>{s(t,o)}),t.u64(e.PlayerIdOnRefresh)}var U=21,we="PartyStatusEffectAddNotify";function We(t,e){let o={};return o.CharacterId=t.u64(),o.statusEffectIds=t.array(t.u16(),()=>t.u32(),80),o.Reason=t.u8(),o}function Oe(t,e){t.u64(e.CharacterId),t.array(e.statusEffectIds,{maxLen:80,lenType:"u16"},o=>{t.u32(o)}),t.u8(e.Reason)}var Z=22,je="PartyStatusEffectRemoveNotify";function Be(t,e){let o={};return o.PartyInstanceId=t.u32(),o.RaidInstanceId=t.u32(),o.CharacterId=t.u64(),o}function Fe(t,e){t.u32(e.PartyInstanceId),t.u32(e.RaidInstanceId),t.u64(e.CharacterId)}var V=23,Ue="PartyStatusEffectResultNotify";function Ze(t,e){let o={};return o.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),o}function Ve(t,e){t.array(e.passiveStatusEffectList,{maxLen:10,lenType:"u16"},o=>{t.u32(o)})}var _=24,_e="PassiveStatusEffectAddNotify";function He(t,e){let o={};return o.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),o}function Ge(t,e){t.array(e.passiveStatusEffectList,{maxLen:10,lenType:"u16"},o=>{t.u32(o)})}var H=25,ze="PassiveStatusEffectRemoveNotify";function Ye(t,e){return{}}function $e(t,e){}var G=26,qe="RaidBossKillNotify";function Je(t,e){return{}}function Qe(t,e){}var z=27,Xe="RaidResult";function xi(t,e){let o={};return o.UnpublishReason=t.u8(),o.ObjectId=t.u64(),o}function Ei(t,e){t.u8(e.UnpublishReason),t.u64(e.ObjectId)}function to(t,e){let o={};return o.unpublishedObjects=t.array(t.u16(),()=>xi(t,e),200),o}function eo(t,e){t.array(e.unpublishedObjects,{maxLen:200,lenType:"u16"},o=>{Ei(t,o)})}var Y=28,oo="RemoveObject";function St(t,e){let o={};return o.Modifier=t.u8(),o.TargetId=t.u64(),o.DamageType=t.u8(),t.bool()&&(o.DamageAttr=t.u8()),o.CurHp=i(t,e),o.Unk3_m=t.u16(),o.MaxHp=i(t,e),o.Damage=i(t,e),o}function Nt(t,e){t.u8(e.Modifier),t.u64(e.TargetId),t.u8(e.DamageType),t.bool(e.DamageAttr!==void 0)&&t.u8(e.DamageAttr),r(t,e.CurHp),t.u16(e.Unk3_m),r(t,e.MaxHp),r(t,e.Damage)}function Ti(t,e){let o={};return o.SkillMoveOptionData=_a(t,e),o.Destination=l(t,e),o.Position=l(t,e),o.skillDamageEvent=St(t,e),o}function Ri(t,e){Ha(t,e.SkillMoveOptionData),y(t,e.Destination),y(t,e.Position),Nt(t,e.skillDamageEvent)}function ao(t,e){let o={};return o.SkillId=t.u32(),o.SkillDamageAbnormalMoveEvents=t.array(t.u16(),()=>Ti(t,e),50),o.SkillEffectId=t.u32(),o.SourceId=t.u64(),o}function io(t,e){t.u32(e.SkillId),t.array(e.SkillDamageAbnormalMoveEvents,{maxLen:50,lenType:"u16"},o=>{Ri(t,o)}),t.u32(e.SkillEffectId),t.u64(e.SourceId)}var $=29,ro="SkillDamageAbnormalMoveNotify";function no(t,e){let o={};return o.SkillLevel=t.u8(),o.SourceId=t.u64(),o.SkillId=t.u32(),o.SkillDamageEvents=t.array(t.u16(),()=>St(t,e),50),o.SkillEffectId=t.u32(),o}function so(t,e){t.u8(e.SkillLevel),t.u64(e.SourceId),t.u32(e.SkillId),t.array(e.SkillDamageEvents,{maxLen:50,lenType:"u16"},o=>{Nt(t,o)}),t.u32(e.SkillEffectId)}var q=30,fo="SkillDamageNotify";function uo(t,e){let o={};return o.SourceId=t.u64(),o.SkillId=t.u32(),o.Stage=t.u8(),o}function mo(t,e){t.u64(e.SourceId),t.u32(e.SkillId),t.u8(e.Stage)}var J=31,lo="SkillStageNotify";function yo(t,e){let o={};return o.SourceId=t.u64(),o.CurDirectionYaw=p(t,e),o.NewDirectionYaw=p(t,e),o.AimTargetPosition=l(t,e),t.bool()&&(o.PitchRotation=p(t,e)),t.bool()&&(o.AiStateId=t.u32()),o.CurPosition=l(t,e),t.bool()&&(o.Unk1_m=t.u32()),o.SkillLevel=t.u8(),o.NewPosition=l(t,e),o.SkillId=t.u32(),o.SkillOptionData=$a(t,e),o}function co(t,e){t.u64(e.SourceId),d(t,e.CurDirectionYaw),d(t,e.NewDirectionYaw),y(t,e.AimTargetPosition),t.bool(e.PitchRotation!==void 0)&&d(t,e.PitchRotation),t.bool(e.AiStateId!==void 0)&&t.u32(e.AiStateId),y(t,e.CurPosition),t.bool(e.Unk1_m!==void 0)&&t.u32(e.Unk1_m),t.u8(e.SkillLevel),y(t,e.NewPosition),t.u32(e.SkillId),qa(t,e.SkillOptionData)}var Q=32,po="SkillStartNotify";function go(t,e){let o={};return o.statusEffectData=n(t,e),o.ObjectId=t.u64(),o.New=t.bool(),o}function So(t,e){s(t,e.statusEffectData),t.u64(e.ObjectId),t.bool(e.New)}var X=34,No="StatusEffectAddNotify";function Io(t,e){let o={};return o.statusEffectIds=t.array(t.u16(),()=>t.u32(),80),o.ObjectId=t.u64(),o.Reason=t.u8(),o}function bo(t,e){t.array(e.statusEffectIds,{maxLen:80,lenType:"u16"},o=>{t.u32(o)}),t.u64(e.ObjectId),t.u8(e.Reason)}var tt=35,Po="StatusEffectRemoveNotify";function xo(t,e){let o={};return o.EffectInstanceId=t.u32(),o.TargetId=t.u64(),o.ExpirationTick=t.u64(),o}function Eo(t,e){t.u32(e.EffectInstanceId),t.u64(e.TargetId),t.u64(e.ExpirationTick)}var et=36,vo="StatusEffectDurationNotify";function To(t,e){let o={};return o.ObjectId=t.u64(),o.EffectInstanceId=t.u32(),o.CharacterId=t.u64(),o.Value=t.u32(),o}function Ro(t,e){t.u64(e.ObjectId),t.u32(e.EffectInstanceId),t.u64(e.CharacterId),t.u32(e.Value)}var ot=37,Do="StatusEffectSyncDataNotify";function ko(t,e){let o={};return o.Step=t.u32(),o.Unk2_m=t.bool(),o.TriggerId=t.u32(),o}function Ao(t,e){t.u32(e.Step),t.bool(e.Unk2_m),t.u32(e.TriggerId)}var at=38,Lo="TriggerBossBattleStatus";function ho(t,e){let o={};return o.PacketResultCode=t.u32(),o.TriggerId=t.u32(),o.Unk0_m=t.u32(),o.InvolvedPCs=t.array(t.u16(),()=>t.u64(),40),o}function Co(t,e){t.u32(e.PacketResultCode),t.u32(e.TriggerId),t.u32(e.Unk0_m),t.array(e.InvolvedPCs,{maxLen:40,lenType:"u16"},o=>{t.u64(o)})}var it=39,Ko="TriggerFinishNotify";function Mo(t,e){let o={};return o.TriggerId=t.u32(),o.TriggerSignalType=t.u32(),o.SourceId=t.u64(),o.InvolvedPCs=t.array(t.u16(),()=>t.u64(),40),o}function wo(t,e){t.u32(e.TriggerId),t.u32(e.TriggerSignalType),t.u64(e.SourceId),t.array(e.InvolvedPCs,{maxLen:40,lenType:"u16"},o=>{t.u64(o)})}var rt=40,Wo="TriggerStartNotify";function Oo(t,e){let o={};return o.MaxHp=i(t,e),o.CharacterId=t.u64(),o.Unk0_m=t.u32(),o.statusEffectDatas=t.array(t.u16(),()=>n(t,e),80),o.Position=t.u64(),o.CurHp=i(t,e),o}function jo(t,e){r(t,e.MaxHp),t.u64(e.CharacterId),t.u32(e.Unk0_m),t.array(e.statusEffectDatas,{maxLen:80,lenType:"u16"},o=>{s(t,o)}),t.u64(e.Position),r(t,e.CurHp)}var nt=41,Bo="TroopMemberUpdateMinNotify";function Fo(t,e){let o={};return o.IdentityGauge1=t.u32(),o.IdentityGauge2=t.u32(),o.IdentityGauge3=t.u32(),o.PlayerId=t.u64(),o}function Uo(t,e){t.u32(e.IdentityGauge1),t.u32(e.IdentityGauge2),t.u32(e.IdentityGauge3),t.u64(e.PlayerId)}var st=42,Zo="IdentityGaugeChangeNotify";function Vo(t,e){let o={};return o.ObjectId=t.u64(),o}function _o(t,e){t.u64(e.ObjectId)}var ft=43,Ho="ZoneObjectUnpublishNotify";function Di(t,e){let o={};return o.StackCount=t.u8(),o.Target=t.u8(),o.Id=t.u32(),o}function ki(t,e){t.u8(e.StackCount),t.u8(e.Target),t.u32(e.Id)}function Go(t,e){let o={};return o.zoneStatusEffectDataList=t.array(t.u16(),()=>Di(t,e),4),o}function zo(t,e){t.array(e.zoneStatusEffectDataList,{maxLen:4,lenType:"u16"},o=>{ki(t,o)})}var ut=44,Yo="ZoneStatusEffectAddNotify";function $o(t,e){let o={};return o.StatusEffectId=t.u32(),o}function qo(t,e){t.u32(e.StatusEffectId)}var mt=45,Jo="ZoneStatusEffectRemoveNotify";function Qo(t,e){let o={};return o.SkillLevel=t.u8(),o.Caster=t.u64(),o.SkillId=t.u32(),o}function Xo(t,e){t.u8(e.SkillLevel),t.u64(e.Caster),t.u32(e.SkillId)}var lt=46,ta="SkillCastNotify";var Li=new Map([[ua,[P]],[ma,[x]],[la,[E]],[ya,[v]],[ca,[T]],[pa,[R]],[da,[D]],[Na,[k]],[Ia,[A]],[ba,[L]],[Pa,[h]],[xa,[C]],[Ea,[K]],[va,[M]],[Aa,[w]],[La,[W]],[ha,[O]],[Ca,[j]],[Ka,[B]],[Ma,[F]],[wa,[U]],[Wa,[Z]],[Oa,[V]],[ja,[_]],[Ba,[H]],[Fa,[G]],[Ua,[z]],[Za,[Y]],[Ga,[$]],[za,[q]],[Ya,[J]],[Ja,[Q]],[Qa,[X]],[Xa,[tt]],[ti,[et]],[ei,[ot]],[oi,[at]],[ai,[it]],[ii,[rt]],[ri,[nt]],[ni,[st]],[si,[ft]],[fi,[ut]],[ui,[mt]],[Va,[lt]]]);var ea=new Map([[P,[kt,Rt,Dt]],[x,[ht,At,Lt]],[E,[Mt,Ct,Kt]],[v,[Ot,wt,Wt]],[T,[Ft,jt,Bt]],[R,[Vt,Ut,Zt]],[D,[Gt,_t,Ht]],[k,[$t,zt,Yt]],[A,[Qt,qt,Jt]],[L,[ee,Xt,te]],[h,[ie,oe,ae]],[C,[fe,ne,se]],[K,[le,ue,me]],[M,[pe,ye,ce]],[w,[Se,de,ge]],[W,[be,Ne,Ie]],[O,[Ee,Pe,xe]],[j,[Re,ve,Te]],[B,[Ae,De,ke]],[F,[Ce,Le,he]],[U,[we,Ke,Me]],[Z,[je,We,Oe]],[V,[Ue,Be,Fe]],[_,[_e,Ze,Ve]],[H,[ze,He,Ge]],[G,[qe,Ye,$e]],[z,[Xe,Je,Qe]],[Y,[oo,to,eo]],[$,[ro,ao,io]],[q,[fo,no,so]],[J,[lo,uo,mo]],[Q,[po,yo,co]],[X,[No,go,So]],[tt,[Po,Io,bo]],[et,[vo,xo,Eo]],[ot,[Do,To,Ro]],[at,[Lo,ko,Ao]],[it,[Ko,ho,Co]],[rt,[Wo,Mo,wo]],[nt,[Bo,Oo,jo]],[st,[Zo,Fo,Uo]],[ft,[Ho,Vo,_o]],[ut,[Yo,Go,zo]],[mt,[Jo,$o,qo]],[lt,[ta,Qo,Xo]]]);var yt=class{time;#e;#t;#o;#a;constructor(...e){if(e.length===5){let[o,a,f,u,m]=e;this.#t=o,this.time=f,this.#e=a,this.#o=u,this.#a=m}else if(e.length===3){let[o,a,f]=e;this.#t=Buffer.alloc(0),this.time=new Date,this.#e=a,this.#o=()=>o,this.#a=f}else throw new Error("[meter-core/logger/parser] - LogEvent<T>: Invalid constructor arguments")}#i;get parsed(){if(!this.#i)try{this.#i=this.#o(new sa(this.#t))}catch(e){console.error(`[meter-core/logger/parser] - parsed - ${e}`);return}return this.#i}#r;get serialized(){if(!this.#r)try{if(!this.parsed)return;let e=new fa;e.skip(aa),this.#a(e,this.parsed);let o=e.value;o.writeUint16LE(o.length,Ci),o.writeUint16LE(this.#e,bt),o.writeUintLE(+new Date,oa,Pt),this.#r=e.value}catch(e){console.error(`[meter-core/logger/parser] - serialized - ${e}`);return}return this.#r}},ct=6,hi=2,Ci=0,It=2,bt=Ci+hi,Pt=6,oa=bt+It,aa=hi+It+Pt;import{createWriteStream as Yi}from"fs";import{createReadStream as $i}from"fs";var xt=class extends zi{},Ki=class extends xt{#e;#t;constructor(e,o,a){super(),this.#e=o,a&&(this.#t=Yi(a,{highWaterMark:0}));let f=Buffer.allocUnsafe(ct);f.writeUIntLE(0,0,ct),this.#t?.write(f),e.on("*",this.handlePkt.bind(this))}handlePkt(e,o,a,f){try{let u=mi.get(o),m=Li.get(o);if(u&&m){let[c]=m,[ia,Et]=u,b=ea.get(c);if(b){let[pt,qi,Wi]=b,ra=new li(Buffer.from(e),o,a,!!f,this.#e,Et).parsed;if(!ra)return;let vt=new yt(ra,c,Wi);this.emit(pt,vt),this.emit("*",pt,vt),this.appendLog(vt)}}}catch(u){console.error(u)}}appendLog(e){this.#t&&e.serialized&&this.#t.write(e.serialized)}},Mi=class extends xt{readLogByChunk(e){let o=new na,a=$i(e),f=!1,u;a.on("data",m=>{if(u===void 0){if(u=this.readVersion(m),u>0){a.destroy();return}m=m.subarray(ct)}o.write(m);let c;for(;c=o.read();)this.readLogChunk(c,u)}).on("end",()=>{f=!0,this.emit("fileEnd","end")}).on("close",()=>{f||this.emit("fileEnd","closed")})}readLogChunk(e,o){try{if(e.length<8)return!1;let a=e.readUIntLE(bt,It),f=new Date(e.readUintLE(oa,Pt)),u=e.subarray(aa),m=ea.get(a);if(m){let[c,ia,Et]=m,b=new yt(u,a,new Date(f),pt=>ia(pt,o),Et);this.emit(c,b),this.emit("*",c,b)}}catch(a){console.error(a)}}readVersion(e){return e.readUintLE(0,ct)}};export{Ki as LiveLogger,xt as Logger,Mi as ReplayLogger};
