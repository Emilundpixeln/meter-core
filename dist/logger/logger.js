var Me=Object.defineProperty;var ss=Object.getOwnPropertyDescriptor;var fs=Object.getOwnPropertyNames;var us=Object.prototype.hasOwnProperty;var ms=(e,t)=>{for(var o in t)Me(e,o,{get:t[o],enumerable:!0})},cs=(e,t,o,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of fs(t))!us.call(e,n)&&n!==o&&Me(e,n,{get:()=>t[n],enumerable:!(a=ss(t,n))||a.enumerable});return e};var ps=e=>cs(Me({},"__esModule",{value:!0}),e);var js={};ms(js,{LiveLogger:()=>ln,Logger:()=>ge,ReplayLogger:()=>yn});module.exports=ps(js);var as=require("tiny-typed-emitter");var r=class{b;o;constructor(t){this.b=t,this.o=0}skip(t=0){this.o+=t}bool(){return this.u8()===1}u8(){return this.b.readUint8(this.o++)}i8(){return this.b.readInt8(this.o++)}u16(){let t=this.b.readUint16LE(this.o);return this.o+=2,t}i16(){let t=this.b.readInt16LE(this.o);return this.o+=2,t}u32(){let t=this.b.readUint32LE(this.o);return this.o+=4,t}i32(){let t=this.b.readInt32LE(this.o);return this.o+=4,t}f32(){let t=this.b.readFloatLE(this.o);return this.o+=4,t}u64(){let t=this.b.readBigUint64LE(this.o);return this.o+=8,t}i64(){let t=this.b.readBigInt64LE(this.o);return this.o+=8,t}string(t){let o=this.u16();if(o<=t){o=o*2;let a=this.b.toString("utf16le",this.o,this.o+o);return this.o+=o,a}return""}bytes(t=0,o,a){if(o&&t>o)return Buffer.alloc(0);a&&(t=t*a);let n=Buffer.from(this.b.subarray(this.o,this.o+t));return this.o+=t,n}array(t,o,a){return a&&t>a?[]:new Array(t).fill(void 0).map(o)}},Ne=class{b;o;constructor(t=65535){this.b=Buffer.allocUnsafe(t),this.o=0}get value(){return this.b.subarray(0,this.o)}skip(t=0){this.o+=t}bool(t=!1){return this.u8(t?1:0),t}u8(t=0){this.b.writeUInt8(t,this.o++)}i8(t=0){this.b.writeInt8(t,this.o++)}u16(t=0){this.o=this.b.writeUInt16LE(t,this.o)}i16(t=0){this.o=this.b.writeInt16LE(t,this.o)}u32(t=0){this.o=this.b.writeUInt32LE(t,this.o)}i32(t=0){this.o=this.b.writeInt32LE(t,this.o)}f32(t=0){this.o=this.b.writeFloatLE(t,this.o)}u64(t=0n){this.o=this.b.writeBigUInt64LE(BigInt(t),this.o)}i64(t=0n){this.o=this.b.writeBigInt64LE(BigInt(t),this.o)}string(t="",o=0){this.u16(t.length),t.length<=o&&(this.o+=this.b.write(t,this.o,"utf16le"))}bytes(t=Buffer.alloc(0),o={}){if(o.maxLen){let a=o.multiplier??1;if(t.length%a)throw new Error(`Error writing bytes, chunkSize should be a multiple of intut value size, got ${t.length}%${a}`);let n=t.length/a;if(n>o.maxLen)throw new Error(`Error writing bytes, input value size exceeded maxLen, got ${n} > ${o.maxLen}`);if(!o.lenType)throw new Error(`Error writing bytes, invalid lenType when writing chunks, got ${o.lenType}`);this[o.lenType](n)}else if(o.length&&t.length!==o.length)throw new Error(`Error writing bytes, input value size doesn't match opts.length, ${t.length} !== ${o.lenType}`);this.o+=t.copy(this.b,this.o)}array(t=[],o,a){if(t===void 0||t.length>o.maxLen){this[o.lenType](0);return}this[o.lenType](t.length),t.forEach(a)}};function E(e){let t={};return t.Points=e.u16(),t.Level=e.u8(),t.Id=e.u32(),t}function je(e){let t=new r(e),o={};return o.abilityDataList=t.array(t.u16(),()=>E(t),100),o}var Fe="PKTAbilityChangeNotify",L=1400;function bn(e){let t={};return t.Level=e.u32(),t.FeatureType=e.u16(),t}function We(e){let t=new r(e),o={};return o.activeAbilityList=t.array(t.u16(),()=>bn(t),60),o.ObjectId=t.u64(),o}var Ze="PKTActiveAbilityNotify",C=46763;function Ve(e){let t=new r(e),o={};return o.struct_120=t.bytes(t.u16(),200,4),o.addonSkillFeatureList=t.array(t.u16(),()=>{let a={};return a.SkillId=t.u32(),a.addonSkillFeatureIdList=t.array(t.u16(),()=>t.u32(),5),a},200),o.ObjectId=t.u64(),o}var ze="PKTAddonSkillFeatureChangeNotify",B=15935;function He(e){let t=new r(e),o={};return o.Unk1_m=t.bytes(t.u32(),688),o.PacketResultCode=t.u32(),o}var Ge="PKTAuthTokenResult",Ye=51838;function $e(e){let t=new r(e),o={};return t.skip(2),o.ParalyzationMaxPoint=t.u32(),t.skip(1),o.Type=t.u8(),o.ObjectId=t.u64(),o.ParalyzationPoint=t.u32(),o}var qe="PKTBlockSkillStateNotify",_=24956;function Je(e){let t=new r(e),o={};return t.skip(1),o.SourceId=t.u64(),o.TargetId=t.u64(),t.skip(1),o.Type=t.u32(),t.skip(1),o}var Qe="PKTCounterAttackNotify",w=20022;function Xe(e){let t=new r(e),o={};return o.Unk0=t.u8(),t.bool()&&(o.Unk1_0=t.u8()),o.Unk2=t.u32(),t.bool()&&(o.Unk3_0=t.u8()),o.Unk4=t.u16(),t.bool()&&(o.Unk5_0=t.u8()),o.SourceId=t.u64(),o.Unk7=t.u32(),o.TargetId=t.u64(),o.Unk9=t.u64(),o}var to="PKTDeathNotify",M=55094;function eo(e){let t=new r(e),o={};return o.abilityDataList=t.array(t.u16(),()=>E(t),100),o.struct_125=t.bytes(t.u16(),348,48),o}var oo="PKTInitAbility",O=1278;var ys=[0,31,28,31,30,31,30,31,31,30,31,30,31];function ds(e){return!(e%4||!(e%100)&&e%400)}function bs(e,t,o){if(e>99){if(e<1752||e==1752&&(t<9||t==9&&o<<14))return!1}else e+=1900;return o>0&&t<=12&&(o<=ys[t]||o==29&&t==2&&ds(e))}function ao(e){let t=Number(e&0xffffffffn),o=Number(e>>32n&0xffffffffn),a=t&4095,n=(t&65535)>>12,s=t>>16&31;bs(a,n,s)||(a=n=s=0);let u=t>>21&31,b=t>>26&63,k=o&63,x=o>>6&16383;return u<24&&b<60&&k<60&&x<1e3||(u=24,b=k=x=0),new Date(Date.UTC(a<=99?a+1900:a,n-1,s,u,b,k,x))}function Sn(e){let t=0n;return t|=BigInt(e.getUTCMilliseconds())<<38n,t|=BigInt(e.getUTCSeconds())<<32n,t|=BigInt(e.getUTCMinutes())<<26n,t|=BigInt(e.getUTCHours())<<21n,t|=BigInt(e.getUTCDate())<<16n,t|=BigInt(e.getUTCMonth()+1)<<12n,t|=BigInt(e.getUTCFullYear()<2e3?e.getUTCFullYear()-1900:e.getUTCFullYear()),t}function g(e,t=0){let o=e.u16();return(o&4095)<2079?(e.o-=2,ao(e.i64())):ao(BigInt(o)&0xfffn|0x11000n)}function gn(e,t=ao(0x1181fn)){t.getUTCFullYear()>=2079?e.u16(Number(Sn(t)&0xffffn)):e.i64(Sn(t))}function ro(e){let t=new r(e),o={};return o.Unk0=t.u64(),o.Unk1=t.u8(),o.Unk2=t.u32(),o.PlayerId=t.u64(),o.Unk4=t.u32(),o.struct_557=t.string(128),o.lostArkDateTime=g(t),o.struct_27=t.array(t.u16(),()=>{let a={};return a.struct_543=t.string(32),a.struct_557=t.string(128),a.versionString=t.string(64),a},64),o}var io="PKTInitEnv",j=29922;function Ss(e){if(e.length===0)return 0n;if(e.length>8)throw new Error("Value is too large");let t=Buffer.alloc(8);return e.copy(t),t.readBigInt64LE()}function i(e,t=0){let o=e.u8(),a=e.bytes(o>>1&7),n=Ss(a)<<4n|BigInt(o>>4);return o&1?-n:n}function m(e,t=0n){let o=Buffer.alloc(8),a=t<0n;o.writeBigInt64LE((a?-t:t)>>4n);let n=0;for(let[s,u]of o.entries())u!=0&&(n=s+1);if(n>7)throw new Error("Value is too large");e.u8(Number((a?-t:t)&0xfn)<<4|(n&7)<<1|(a?1:0)),e.bytes(o.subarray(0,n),{length:n})}function v(e){let t={};return t.Unk0=e.u8(),t.Unk1=i(e),t.Unk2=i(e),t.Unk3=e.u8(),t.Unk4=e.u8(),t.Unk5=e.u64(),t.Unk6=e.u16(),t}function l(e){let t={};return t.OccurTime=g(e),t.struct_430=e.bytes(e.u16(),8,7),t.Unk2=e.u8(),t.EffectInstanceId=e.u32(),t.StatusEffectId=e.u32(),e.bool()&&(t.Unk5_0=e.u64()),t.SkillLevel=e.u8(),e.bool()&&(t.Value=e.bytes(16)),t.SourceId=e.u64(),t.TotalTime=e.u32(),t.EndTick=e.u64(),t}function so(e){let t=new r(e),o={};return o.ClassId=t.u16(),o.Unk1=t.u8(),o.Unk2=t.u8(),o.Unk3=t.u32(),o.Unk4=t.u8(),o.Unk5=t.u8(),o.Unk6=t.u32(),o.Unk7=t.u8(),o.Unk8=t.u8(),o.Unk9=t.u8(),o.Unk10=t.bytes(35),o.Unk11=t.u8(),o.Unk12=t.u64(),o.Unk13=t.u32(),o.statPair=t.array(t.u16(),()=>{let a={};return a.StatType=t.u8(),a.Value=i(t),a},152),o.Unk15=t.bytes(25),o.struct_328=t.bytes(t.u16(),104,30),o.Unk17=t.u32(),o.Unk18=t.u16(),o.struct_323=t.string(7),o.Unk20=t.u32(),o.Unk21=t.u32(),o.Unk22=t.u32(),o.Unk23=t.u8(),o.CharacterId=t.u64(),o.Unk25=t.u8(),o.struct_215=t.bytes(t.u16(),3,17),o.Unk27=t.u64(),o.Unk28=t.u16(),o.Unk29=t.u8(),o.Unk30=t.u16(),o.Unk31=t.u8(),o.Unk32=t.u16(),o.struct_96=t.bytes(t.u16(),58),o.Unk34=t.u8(),o.struct_375=t.array(t.u16(),()=>v(t),5),t.bool()&&(o.Unk36_0=t.u32()),o.Unk37=t.u32(),o.Unk38=t.u64(),o.Unk39=t.u32(),o.Unk40=t.u8(),o.Unk41=t.u8(),o.Level=t.u16(),o.Unk43=t.u32(),o.Unk44=t.u8(),o.PlayerId=t.u64(),o.Unk46=t.u32(),o.Unk47=t.u8(),o.Unk48=t.u8(),o.Unk49=t.u8(),o.GearLevel=t.u32(),o.Unk51=t.bytes(120),o.Name=t.string(20),o.statusEffectDatas=t.array(t.u16(),()=>l(t),80),o.Unk54=t.u64(),o.Unk55=t.u8(),o.Unk56=t.u32(),o}var fo="PKTInitPC",F=36886;function Pn(e){let t={};return e.bool()&&(t.Unk0_0=e.bytes(9)),e.bool()&&(t.Unk1_0=e.u32()),t.Unk2=e.u32(),t.Unk3=e.u32(),t.Unk4=e.u32(),t}function uo(e){let t=new r(e),o={};return o.Unk0=t.u32(),o.Unk1=t.u8(),o.struct_215=t.bytes(t.u16(),3,17),o.Unk3=t.u64(),o.statPair=t.array(t.u16(),()=>{let a={};return a.StatType=t.u8(),a.Value=i(t),a},152),o.addonSkillFeatureList=t.array(t.u16(),()=>{let a={};return a.SkillId=t.u32(),a.addonSkillFeatureIdList=t.array(t.u16(),()=>t.u32(),5),a},200),o.Unk6=t.u8(),o.struct_125=t.bytes(t.u16(),348,48),o.abilityDataList=t.array(t.u16(),()=>E(t),100),o.struct_120=t.bytes(t.u16(),200,4),o.struct_328=t.bytes(t.u16(),104,30),o.statusEffectDatas=t.array(t.u16(),()=>l(t),80),o.struct_408=t.array(t.u16(),()=>Pn(t),300),o.Unk13=t.u8(),t.bool()&&(o.Unk14_0=t.u32()),o.Unk15=t.u64(),o}var mo="PKTInitLocal",W=47316;function co(e){let t=new r(e),o={};return o.Account_CharacterId1=t.u64(),o.ServerAddr=t.string(256),o.Account_CharacterId2=t.u64(),o.Unk3=t.u32(),o}var po="PKTMigrationExecute",Z=32608;function V(e){let t={};return e.bool()&&(t.Unk0_0=e.u8()),t.Unk1=e.u16(),t.Unk2=e.u16(),t.struct_436=e.bytes(e.u16(),3,14),t.lostArkDateTime=g(e),t.Unk5=e.u32(),t}function xn(e){let t={};return t.lostArkString=e.string(20),t.Unk1=e.u8(),t.Unk2=e.u8(),t.Unk3=e.u16(),t.Unk4=e.u64(),t.struct_302=e.array(e.u16(),()=>V(e),32),t.struct_88=e.bytes(e.u32(),512),t.Unk7=e.u8(),t}function lo(e){return e>>20===1?-((~e>>>0)+1&2097151):e}function f(e,t=0){let o=e.u64();return{x:lo(Number(o&0x1fffffn)),y:lo(Number(o>>21n&0x1fffffn)),z:lo(Number(o>>42n&0x1fffffn))}}function S(e,t={x:0,y:0,z:0}){e.u64(BigInt(Math.round(t.x??0)>>>0&2097151)|BigInt(Math.round(t.y??0)>>>0&2097151)<<21n|BigInt(Math.round(t.z??0)>>>0&2097151)<<42n)}function p(e,t=0){return e.u16()*(2*Math.PI)/65536}function N(e,t=0){e.u16(Math.round(t*65536/(2*Math.PI))%65536)}function Te(e){let t={};return e.bool()&&(t.Unk0_0=e.u8()),e.bool()&&(t.Unk1_0=e.u64()),e.bool()&&(t.Unk2_0=e.u32()),t.struct_375=e.array(e.u16(),()=>v(e),5),e.bool()&&(t.Unk4_0=e.u32()),e.bool()&&(t.Unk5_0=e.u8()),e.bool()&&(t.struct_324=e.bytes(e.u16(),11,9)),e.bool()&&(t.Unk7_0=e.u8()),t.Unk8=e.u8(),e.bool()&&(t.Unk9_0=e.u8()),t.Unk10=e.u8(),t.Position=f(e),e.bool()&&(t.struct_255=e.bytes(e.u16(),12,12)),e.bool()&&(t.Unk13_0=e.u32()),t.Unk14=e.u8(),e.bool()&&(t.Unk15_0=e.u16()),t.Unk16=e.u8(),e.bool()&&(t.Unk17_0=e.u32()),t.Unk18=e.u16(),t.TypeId=e.u32(),t.DirectionYaw=p(e),t.statPair=e.array(e.u16(),()=>{let o={};return o.StatType=e.u8(),o.Value=i(e),o},152),t.SpawnIndex=e.u32(),t.Unk23=e.u8(),t.ObjectId=e.u64(),t.statusEffectDatas=e.array(e.u16(),()=>l(e),80),e.bool()&&(t.Unk26_0=e.u16()),e.bool()&&(t.Unk27_0=e.u8()),e.bool()&&(t.struct_687=xn(e)),e.bool()&&(t.TransitIndex=e.u32()),t.Unk30=e.u8(),e.bool()&&(t.Unk31_0=e.u8()),e.bool()&&(t.Unk32_0=e.u8()),t}function yo(e){let t=new r(e),o={};return t.bool()&&(o.Unk0_0_0=t.u64()),o.Unk1=t.u8(),t.bool()&&(o.Unk0_0=t.string(20),o.Unk0_1=t.string(20)),t.bool()&&(o.Unk3_0=t.u8()),o.NpcStruct=Te(t),o}var bo="PKTNewNpc",z=34376;function So(e){let t=new r(e),o={};return o.NpcData=Te(t),o.PublishReason=t.u8(),o.OwnerId=t.u64(),t.skip(31),o}var go="PKTNewNpcSummon",H=58650;function In(e){let t={};return t.Unk0=e.bytes(5),t.Unk1=e.u8(),t.Unk2=e.u8(),t.Level=e.u16(),t.Unk4=e.u32(),t.Unk5=e.u32(),t.Unk6=e.u16(),t.Unk5_m=e.u32(),t.statusEffectDatas=e.array(e.u16(),()=>l(e),80),t.ClassId=e.u16(),t.Heading=p(e),t.Unk11=e.bytes(25),t.Unk12=e.u8(),t.Unk13=e.u32(),t.Unk14=e.u16(),t.Unk15=e.u8(),t.Unk16=e.u32(),t.Unk17=e.u8(),t.struct_120=e.bytes(e.u16(),200,4),t.struct_88=e.bytes(e.u32(),512),t.struct_301=e.array(e.u16(),()=>V(e),9),t.struct_375=e.array(e.u16(),()=>v(e),5),t.Unk22=e.u16(),t.Unk23=e.u8(),t.Unk24=e.u32(),t.Unk25=e.u8(),t.statPair=e.array(e.u16(),()=>{let o={};return o.StatType=e.u8(),o.Value=i(e),o},152),t.Unk27=e.u8(),t.Unk28=e.u8(),t.Unk29=e.u8(),t.Name=e.string(20),t.addonSkillFeatureList=e.array(e.u16(),()=>{let o={};return o.SkillId=e.u32(),o.addonSkillFeatureIdList=e.array(e.u16(),()=>e.u32(),5),o},200),t.Unk32=e.u8(),e.bool()&&(t.Unk33_0=e.bytes(12)),t.PlayerId=e.u64(),t.Unk35=e.string(20),t.Unk36=e.u8(),t.Unk37=e.u32(),t.GearLevel=e.u32(),t.Unk39=e.u32(),t.struct_302=e.array(e.u16(),()=>V(e),32),t.Unk41=e.u64(),t.CharacterId=e.u64(),t.Unk43=e.u32(),t.Unk44=e.u32(),t}function kn(e){let t={};return t.Unk0=e.bytes(12),e.bool()&&(t.Unk1_0=e.bytes(12)),t.Unk2=e.u32(),t.Unk3=e.u32(),t}function Po(e){let t=new r(e),o={};return t.bool()&&(o.Unk5_0_m=t.bytes(20)),t.bool()&&(o.Unk3_0_m=t.u32()),o.PCStruct=In(t),o.Unk0_m=t.u8(),t.bool()&&(o.TrackMoveInfo=kn(t)),o.Unk2_m=t.u8(),t.bool()&&(o.Unk4_0_m=t.bytes(12)),o}var No="PKTNewPC",G=38230;function D(e,t=0){return{first:e.u8(),second:e.u8(),third:e.u8()}}function Ie(e,t){e.u8(t.first),e.u8(t.second),e.u8(t.third)}function K(e,t=0){return{first:e.u16(),second:e.u16(),third:e.u16()}}function ke(e,t){e.u16(t.first),e.u16(t.second),e.u16(t.third)}function En(e){let t={};return t.Unk0=e.u8(),t.Unk1=e.u32(),t.TargetObjectId=e.u64(),t.Unk3=e.u16(),t.Unk4=e.u16(),t.SkillEffect=e.u32(),t.tripodIndex=D(e),t.Unk7=e.u8(),t.tripodLevel=K(e),t.Unk9=e.u64(),e.bool()&&(t.Unk10_0=e.u32()),t.ProjectileId=e.u64(),e.bool()&&(t.struct_324=e.bytes(e.u16(),11,9)),t.OwnerId=e.u64(),t.Unk14=e.u32(),t.ChainSkillEffect=e.u32(),t.Unk16=e.u64(),t.SkillLevel=e.u8(),t.SkillId=e.u32(),t.Unk19=e.u32(),e.bool()&&(t.Unk20_0=e.u64()),t}function Io(e){let t=new r(e),o={};return o.projectileInfo=En(t),o}var ko="PKTNewProjectile",Y=48846;function Eo(e){let t=new r(e),o={};return o.ObjectId=t.u64(),o.NoHitCheckTime=t.u32(),o.ParalyzationMaxPoint=t.u32(),o.ParalyzationPoint=t.u32(),o.HitCheckTime=t.u32(),o.Enable=t.bool(),t.skip(1),o.DecreasePoint=t.u32(),t.skip(1),o}var vo="PKTParalyzationStateNotify",$=13954;function vn(e){let t={};return t.ZoneId=e.u32(),t.Unk1=e.u8(),t.Unk2=e.u16(),t.WorldId=e.u8(),t.ClassId=e.u16(),t.Unk5=e.u8(),t.Unk6=e.u8(),t.MaxHp=i(e),t.Position=f(e),t.Unk9=e.u8(),t.CurHp=i(e),t.Auths=e.u8(),t.Name=e.string(20),t.TransitIndex=e.u32(),t.CharacterLevel=e.u16(),t.CharacterId=e.u64(),t.PartyMemberNumber=e.u8(),t.GearLevel=e.u32(),t.Unk18=e.u8(),t.ZoneInstId=e.u64(),t}function Ro(e){let t=new r(e),o={};return o.RaidInstanceId=t.u32(),o.LootGrade=t.u32(),o.PartyLootType=t.u8(),o.PartyInstanceId=t.u32(),o.MemberDatas=t.array(t.u16(),()=>vn(t),40),o.PartyType=t.u8(),o}var Do="PKTPartyInfo",q=2273;function Ko(e){let t=new r(e),o={};return o.PartyInstanceId=t.u32(),o.Name=t.string(20),o.PartyLeaveType=t.u8(),o}var Ao="PKTPartyLeaveResult",J=57280;function Uo(e){let t=new r(e),o={};return o.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),o.ObjectId=t.u64(),o.Unk0_m=t.u8(),o}var ho="PKTPartyPassiveStatusEffectAddNotify",Q=44797;function Lo(e){let t=new r(e),o={};return o.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),o.ObjectId=t.u64(),o}var Co="PKTPartyPassiveStatusEffectRemoveNotify",X=48015;function Bo(e){let t=new r(e),o={};return o.statusEffectDatas=t.array(t.u16(),()=>l(t),80),o.PlayerIdOnRefresh=t.u64(),o.CharacterId=t.u64(),o.Unk3=t.u8(),o.Unk4=t.u64(),o}var _o="PKTPartyStatusEffectAddNotify",tt=56075;function wo(e){let t=new r(e),o={};return o.statusEffectIds=t.array(t.u16(),()=>t.u32(),80),o.CharacterId=t.u64(),o.Unk2=t.u64(),o.Reason=t.u8(),o}var Mo="PKTPartyStatusEffectRemoveNotify",et=9020;function Oo(e){let t=new r(e),o={};return t.skip(1),o.CharacterId=t.u64(),t.skip(4),o.RaidInstanceId=t.u32(),o.PartyInstanceId=t.u32(),t.skip(22),o}var jo="PKTPartyStatusEffectResultNotify",ot=46121;function Fo(e){let t=new r(e),o={};return o.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),o}var Wo="PKTPassiveStatusEffectAddNotify",at=8484;function Zo(e){let t=new r(e),o={};return o.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),o}var Vo="PKTPassiveStatusEffectRemoveNotify",rt=48556;function zo(e){let t=new r(e),o={};return o.Unk0=t.bytes(5),o}var Ho="PKTRaidBossKillNotify",it=45163;function Go(e){let t=new r(e),o={};return o.Unk0=t.u64(),o.Unk1=t.u64(),o.Unk2=t.u8(),o.Unk3=t.u8(),o.Unk4=t.u64(),o.Unk5=t.u8(),o.struct_47=t.array(t.u16(),()=>{let a={};return a.struct_506=t.bytes(t.u16(),3),a.Unk0_0_1=i(t),a.Unk0_0_2=i(t),a.Unk0_0_3=t.u32(),a},3),o.Unk7=t.u64(),o}var Yo="PKTRaidResult",nt=34118;function Rn(e){let t={};return t.UnpublishReason=e.u8(),t.ObjectId=e.u64(),t}function $o(e){let t=new r(e),o={};return o.unpublishedObjects=t.array(t.u16(),()=>Rn(t),200),o}var qo="PKTRemoveObject",st=42767;function Jo(e){let t=new r(e),o={};return o.SkillLevel=t.u8(),o.Caster=t.u64(),o.SkillId=t.u32(),t.skip(2),o}var Qo="PKTSkillCastNotify",ft=40202;function Ee(e){let t={};return t.DamageType=e.u8(),t.Modifier=e.u8(),t.Unk3_m=e.u16(),t.MaxHp=i(e),e.bool()&&(t.DamageAttr=e.u8()),t.CurHp=i(e),t.Damage=i(e),t.TargetId=e.u64(),t}function ve(e,t=0){let o={},a=e.u8();return a&1&&(o.MoveTime=e.u32()),a&2&&(o.StandUpTime=e.u32()),a&4&&(o.DownTime=e.u32()),a&8&&(o.FreezeTime=e.u32()),a&16&&(o.MoveHeight=e.u32()),a&32&&(o.FarmostDist=e.u32()),a&64&&(o.flag40=e.bytes(e.u16(),6)),o}function Kn(e,t){let o=(t.MoveTime===void 0?0:1)|(t.StandUpTime===void 0?0:2)|(t.DownTime===void 0?0:4)|(t.FreezeTime===void 0?0:8)|(t.MoveHeight===void 0?0:16)|(t.FarmostDist===void 0?0:32)|(t.flag40===void 0?0:64);e.u8(o),o&1&&e.u32(t.MoveTime),o&2&&e.u32(t.StandUpTime),o&4&&e.u32(t.DownTime),o&8&&e.u32(t.FreezeTime),o&16&&e.u32(t.MoveHeight),o&32&&e.u32(t.FarmostDist),o&64&&e.bytes(t.flag40,{maxLen:6,lenType:"u16"})}function Un(e){let t={};return t.Unk8_m=e.u16(),t.Position=f(e),t.skillDamageEvent=Ee(e),t.Unk4_m=e.u16(),t.Unk2_m=e.u64(),t.Unk3_m=e.u16(),t.SkillMoveOptionData=ve(e),t.Unk1_m=e.u8(),t.Destination=f(e),t}function Xo(e){let t=new r(e),o={};return o.SkillEffectId=t.u32(),o.SkillDamageAbnormalMoveEvents=t.array(t.u16(),()=>Un(t),50),o.Unk1_m=t.u8(),o.Unk2_m=t.u32(),o.SkillId=t.u32(),o.SourceId=t.u64(),o}var ta="PKTSkillDamageAbnormalMoveNotify",ut=59998;function ea(e){let t=new r(e),o={};return o.SkillLevel=t.u8(),o.SourceId=t.u64(),o.SkillEffectId=t.u32(),o.SkillDamageEvents=t.array(t.u16(),()=>Ee(t),50),o.SkillId=t.u32(),o}var oa="PKTSkillDamageNotify",mt=26332;function aa(e){let t=new r(e),o={};return o.SkillId=t.u32(),t.skip(16),o.SourceId=t.u64(),t.skip(19),o.Stage=t.u8(),t.skip(5),o}var ra="PKTSkillStageNotify",ct=9713;function Re(e,t=0){let o={},a=e.u8();return a&1&&(o.LayerIndex=e.u8()),a&2&&(o.StartStageIndex=e.u8()),a&4&&(o.TransitIndex=e.u32()),a&8&&(o.StageStartTime=e.u32()),a&16&&(o.FarmostDistance=e.u32()),a&32&&(o.TripodIndex=D(e)),a&64&&(o.TripodLevel=K(e)),o}function hn(e,t){let o=(t.LayerIndex===void 0?0:1)|(t.StartStageIndex===void 0?0:2)|(t.TransitIndex===void 0?0:4)|(t.StageStartTime===void 0?0:8)|(t.FarmostDistance===void 0?0:16)|(t.TripodIndex===void 0?0:32)|(t.TripodLevel===void 0?0:64);e.u8(o),o&1&&e.u8(t.LayerIndex),o&2&&e.u8(t.StartStageIndex),o&4&&e.u32(t.TransitIndex),o&8&&e.u32(t.StageStartTime),o&16&&e.u32(t.FarmostDistance),o&32&&Ie(e,t.TripodIndex),o&64&&ke(e,t.TripodLevel)}function ia(e){let t=new r(e),o={};return o.SkillId=t.u32(),o.NewPosition=f(t),o.CurDirectionYaw=p(t),t.bool()&&(o.Unk1_m=t.u32()),o.SkillLevel=t.u8(),t.bool()&&(o.PitchRotation=p(t)),o.SkillOptionData=Re(t),o.NewDirectionYaw=p(t),o.SourceId=t.u64(),t.bool()&&(o.AiStateId=t.u32()),o.AimTargetPosition=f(t),o.CurPosition=f(t),o}var na="PKTSkillStartNotify",pt=52727;function sa(e){let t=new r(e),o={};return o.ObjectId=t.u64(),o.Unk1=t.u8(),t.bool()&&(o.Unk2_0=t.u32()),o.StatPairChangedList=t.array(t.u16(),()=>{let a={};return a.StatType=t.u8(),a.Value=i(t),a},152),o.Unk4=t.array(t.u16(),()=>{let a={};return a.StatType=t.u8(),a.Value=i(t),a},152),o}var fa="PKTStatChangeOriginNotify",ua=8370;function ma(e){let t=new r(e),o={};return o.New=t.bool(),o.Unk1=t.u64(),t.bool()&&(o.Unk2_0=t.u64()),o.ObjectId=t.u64(),o.statusEffectData=l(t),o}var ca="PKTStatusEffectAddNotify",lt=29231;function pa(e){let t=new r(e),o={};return o.Reason=t.u8(),o.statusEffectIds=t.array(t.u16(),()=>t.u32(),80),o.ObjectId=t.u64(),o}var la="PKTStatusEffectRemoveNotify",yt=36929;function ya(e){let t=new r(e),o={};return t.skip(1),o.TargetId=t.u64(),t.skip(1),o.ExpirationTick=t.u64(),t.skip(1),o.EffectInstanceId=t.u32(),o}var da="PKTStatusEffectDurationNotify",dt=43493;function ba(e){let t=new r(e),o={};return o.ObjectId=t.u64(),o.Value=t.u32(),t.skip(6),o.EffectInstanceId=t.u32(),o.CharacterId=t.u64(),o}var Sa="PKTStatusEffectSyncDataNotify",bt=39153;function ga(e){let t=new r(e),o={};return o.TriggerId=t.u32(),o.Unk2_m=t.bool(),t.skip(1),o.Step=t.u32(),o}var Pa="PKTTriggerBossBattleStatus",St=23399;function Na(e){let t=new r(e),o={};return o.PacketResultCode=t.u32(),o.Unk0_m=t.u32(),o.InvolvedPCs=t.array(t.u16(),()=>t.u64(),40),o.TriggerId=t.u32(),o}var xa="PKTTriggerFinishNotify",gt=48546;function Ta(e){let t=new r(e),o={};return o.TriggerSignalType=t.u32(),o.TriggerId=t.u32(),o.SourceId=t.u64(),o.InvolvedPCs=t.array(t.u16(),()=>t.u64(),40),o}var Ia="PKTTriggerStartNotify",Pt=54667;function ka(e){let t=new r(e),o={};return o.Position=t.u64(),o.MaxHp=i(t),o.statusEffectDatas=t.array(t.u16(),()=>l(t),80),o.Unk0_m=t.u32(),o.CurHp=i(t),o.CharacterId=t.u64(),o}var Ea="PKTTroopMemberUpdateMinNotify",Nt=51633;function va(e){let t=new r(e),o={};return t.skip(1),o.PlayerId=t.u64(),o.IdentityGauge1=t.u32(),o.IdentityGauge2=t.u32(),o.IdentityGauge3=t.u32(),t.skip(2),o}var Ra="PKTIdentityGaugeChangeNotify",xt=53656;function Da(e){let t=new r(e),o={};return o.ObjectId=t.u64(),t.skip(2),o}var Ka="PKTZoneObjectUnpublishNotify",Tt=37146;function Cn(e){let t={};return t.StackCount=e.u8(),t.Id=e.u32(),t.InstanceId=e.u64(),t.Target=e.u8(),t}function Aa(e){let t=new r(e),o={};return o.zoneStatusEffectDataList=t.array(t.u16(),()=>Cn(t),4),o}var Ua="PKTZoneStatusEffectAddNotify",It=44701;function ha(e){let t=new r(e),o={};return t.skip(2),o.StatusEffectId=t.u32(),o}var La="PKTZoneStatusEffectRemoveNotify",kt=4905;var Ca=new Map([[L,[Fe,je]],[C,[Ze,We]],[B,[ze,Ve]],[Ye,[Ge,He]],[_,[qe,$e]],[w,[Qe,Je]],[M,[to,Xe]],[O,[oo,eo]],[j,[io,ro]],[F,[fo,so]],[W,[mo,uo]],[Z,[po,co]],[z,[bo,yo]],[H,[go,So]],[G,[No,Po]],[Y,[ko,Io]],[$,[vo,Eo]],[q,[Do,Ro]],[J,[Ao,Ko]],[Q,[ho,Uo]],[X,[Co,Lo]],[tt,[_o,Bo]],[et,[Mo,wo]],[ot,[jo,Oo]],[at,[Wo,Fo]],[rt,[Vo,Zo]],[it,[Ho,zo]],[nt,[Yo,Go]],[st,[qo,$o]],[ft,[Qo,Jo]],[ut,[ta,Xo]],[mt,[oa,ea]],[ct,[ra,aa]],[pt,[na,ia]],[ua,[fa,sa]],[lt,[ca,ma]],[yt,[la,pa]],[dt,[da,ya]],[bt,[Sa,ba]],[St,[Pa,ga]],[gt,[xa,Na]],[Pt,[Ia,Ta]],[Nt,[Ea,ka]],[xt,[Ra,va]],[Tt,[Ka,Da]],[It,[Ua,Aa]],[kt,[La,ha]]]);function A(e,t){let o={};return o.Points=e.u16(),o.Id=e.u32(),o.Level=e.u8(),o}function U(e,t){e.u16(t.Points),e.u32(t.Id),e.u8(t.Level)}function _a(e,t){let o={};return o.abilityDataList=e.array(e.u16(),()=>A(e,t),100),o}function wa(e,t){e.array(t.abilityDataList,{maxLen:100,lenType:"u16"},o=>{U(e,o)})}var Et=0,Ma="AbilityChangeNotify";function _n(e,t){let o={};return o.FeatureType=e.u16(),o.Level=e.u32(),o}function wn(e,t){e.u16(t.FeatureType),e.u32(t.Level)}function Oa(e,t){let o={};return o.activeAbilityList=e.array(e.u16(),()=>_n(e,t),60),o.ObjectId=e.u64(),o}function ja(e,t){e.array(t.activeAbilityList,{maxLen:60,lenType:"u16"},o=>{wn(e,o)}),e.u64(t.ObjectId)}var vt=1,Fa="ActiveAbilityNotify";function Wa(e,t){let o={};return o.ObjectId=e.u64(),o.addonSkillFeatureList=e.array(e.u16(),()=>{let a={};return a.addonSkillFeatureIdList=e.array(e.u16(),()=>e.u32(),5),a.SkillId=e.u32(),a},200),o}function Za(e,t){e.u64(t.ObjectId),e.array(t.addonSkillFeatureList,{maxLen:200,lenType:"u16"},o=>{e.array(o.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},a=>{e.u32(a)}),e.u32(o.SkillId)})}var Rt=2,Va="AddonSkillFeatureChangeNotify";function za(e,t){let o={};return o.ParalyzationMaxPoint=e.u32(),o.Type=e.u8(),o.ObjectId=e.u64(),o.ParalyzationPoint=e.u32(),o}function Ha(e,t){e.u32(t.ParalyzationMaxPoint),e.u8(t.Type),e.u64(t.ObjectId),e.u32(t.ParalyzationPoint)}var Dt=4,Ga="BlockSkillStateNotify";function Ya(e,t){let o={};return o.SourceId=e.u64(),o.TargetId=e.u64(),o.Type=e.u32(),o}function $a(e,t){e.u64(t.SourceId),e.u64(t.TargetId),e.u32(t.Type)}var Kt=5,qa="CounterAttackNotify";function Ja(e,t){let o={};return o.SourceId=e.u64(),o.TargetId=e.u64(),o}function Qa(e,t){e.u64(t.SourceId),e.u64(t.TargetId)}var At=6,Xa="DeathNotify";function tr(e,t){let o={};return o.abilityDataList=e.array(e.u16(),()=>A(e,t),100),o}function er(e,t){e.array(t.abilityDataList,{maxLen:100,lenType:"u16"},o=>{U(e,o)})}var Ut=7,or="InitAbility";function ar(e,t){let o={};return o.PlayerId=e.u64(),o}function rr(e,t){e.u64(t.PlayerId)}var ht=8,ir="InitEnv";function y(e,t){let o={};return o.SkillLevel=e.u8(),o.OccurTime=g(e,t),o.StatusEffectId=e.u32(),o.SourceId=e.u64(),o.TotalTime=e.u32(),o.EndTick=e.u64(),e.bool()&&(o.Value=e.bytes(16)),o.EffectInstanceId=e.u32(),o}function d(e,t){e.u8(t.SkillLevel),gn(e,t.OccurTime),e.u32(t.StatusEffectId),e.u64(t.SourceId),e.u32(t.TotalTime),e.u64(t.EndTick),e.bool(t.Value!==void 0)&&e.bytes(t.Value,{length:16}),e.u32(t.EffectInstanceId)}function nr(e,t){let o={};return o.statPair=e.array(e.u16(),()=>{let a={};return a.StatType=e.u8(),a.Value=i(e,t),a},152),o.Name=e.string(20),o.Level=e.u16(),o.statusEffectDatas=e.array(e.u16(),()=>y(e,t),80),o.CharacterId=e.u64(),o.GearLevel=e.u32(),o.PlayerId=e.u64(),o.ClassId=e.u16(),o}function sr(e,t){e.array(t.statPair,{maxLen:152,lenType:"u16"},o=>{e.u8(o.StatType),m(e,o.Value)}),e.string(t.Name,20),e.u16(t.Level),e.array(t.statusEffectDatas,{maxLen:80,lenType:"u16"},o=>{d(e,o)}),e.u64(t.CharacterId),e.u32(t.GearLevel),e.u64(t.PlayerId),e.u16(t.ClassId)}var Lt=9,fr="InitPC";function ur(e,t){let o={};return o.statPair=e.array(e.u16(),()=>{let a={};return a.StatType=e.u8(),a.Value=i(e,t),a},152),o.statusEffectDatas=e.array(e.u16(),()=>y(e,t),80),o.addonSkillFeatureList=e.array(e.u16(),()=>{let a={};return a.addonSkillFeatureIdList=e.array(e.u16(),()=>e.u32(),5),a.SkillId=e.u32(),a},200),o.abilityDataList=e.array(e.u16(),()=>A(e,t),100),o}function mr(e,t){e.array(t.statPair,{maxLen:152,lenType:"u16"},o=>{e.u8(o.StatType),m(e,o.Value)}),e.array(t.statusEffectDatas,{maxLen:80,lenType:"u16"},o=>{d(e,o)}),e.array(t.addonSkillFeatureList,{maxLen:200,lenType:"u16"},o=>{e.array(o.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},a=>{e.u32(a)}),e.u32(o.SkillId)}),e.array(t.abilityDataList,{maxLen:100,lenType:"u16"},o=>{U(e,o)})}var Ct=10,cr="InitLocal";function pr(e,t){let o={};return o.Account_CharacterId1=e.u64(),o.ServerAddr=e.string(256),o.Account_CharacterId2=e.u64(),o}function lr(e,t){e.u64(t.Account_CharacterId1),e.string(t.ServerAddr,256),e.u64(t.Account_CharacterId2)}var Bt=11,yr="MigrationExecute";function De(e,t){let o={};return o.SpawnIndex=e.u32(),o.ObjectId=e.u64(),e.bool()&&(o.TransitIndex=e.u32()),o.Position=f(e,t),o.statusEffectDatas=e.array(e.u16(),()=>y(e,t),80),o.DirectionYaw=p(e,t),o.statPair=e.array(e.u16(),()=>{let a={};return a.StatType=e.u8(),a.Value=i(e,t),a},152),o.TypeId=e.u32(),o}function Ke(e,t){e.u32(t.SpawnIndex),e.u64(t.ObjectId),e.bool(t.TransitIndex!==void 0)&&e.u32(t.TransitIndex),S(e,t.Position),e.array(t.statusEffectDatas,{maxLen:80,lenType:"u16"},o=>{d(e,o)}),N(e,t.DirectionYaw),e.array(t.statPair,{maxLen:152,lenType:"u16"},o=>{e.u8(o.StatType),m(e,o.Value)}),e.u32(t.TypeId)}function dr(e,t){let o={};return o.NpcStruct=De(e,t),o}function br(e,t){Ke(e,t.NpcStruct)}var _t=12,Sr="NewNpc";function gr(e,t){let o={};return o.PublishReason=e.u8(),o.OwnerId=e.u64(),o.NpcData=De(e,t),o}function Pr(e,t){e.u8(t.PublishReason),e.u64(t.OwnerId),Ke(e,t.NpcData)}var wt=13,Nr="NewNpcSummon";function On(e,t){let o={};return o.GearLevel=e.u32(),o.statPair=e.array(e.u16(),()=>{let a={};return a.StatType=e.u8(),a.Value=i(e,t),a},152),o.Name=e.string(20),o.Heading=p(e,t),o.CharacterId=e.u64(),o.PlayerId=e.u64(),o.addonSkillFeatureList=e.array(e.u16(),()=>{let a={};return a.addonSkillFeatureIdList=e.array(e.u16(),()=>e.u32(),5),a.SkillId=e.u32(),a},200),o.ClassId=e.u16(),o.Level=e.u16(),o.statusEffectDatas=e.array(e.u16(),()=>y(e,t),80),o}function jn(e,t){e.u32(t.GearLevel),e.array(t.statPair,{maxLen:152,lenType:"u16"},o=>{e.u8(o.StatType),m(e,o.Value)}),e.string(t.Name,20),N(e,t.Heading),e.u64(t.CharacterId),e.u64(t.PlayerId),e.array(t.addonSkillFeatureList,{maxLen:200,lenType:"u16"},o=>{e.array(o.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},a=>{e.u32(a)}),e.u32(o.SkillId)}),e.u16(t.ClassId),e.u16(t.Level),e.array(t.statusEffectDatas,{maxLen:80,lenType:"u16"},o=>{d(e,o)})}function xr(e,t){let o={};return o.PCStruct=On(e,t),o}function Tr(e,t){jn(e,t.PCStruct)}var Mt=14,Ir="NewPC";function Fn(e,t){let o={};return o.tripodIndex=D(e,t),o.ChainSkillEffect=e.u32(),o.SkillEffect=e.u32(),o.SkillId=e.u32(),o.TargetObjectId=e.u64(),o.OwnerId=e.u64(),o.SkillLevel=e.u8(),o.ProjectileId=e.u64(),o.tripodLevel=K(e,t),o}function Wn(e,t){Ie(e,t.tripodIndex),e.u32(t.ChainSkillEffect),e.u32(t.SkillEffect),e.u32(t.SkillId),e.u64(t.TargetObjectId),e.u64(t.OwnerId),e.u8(t.SkillLevel),e.u64(t.ProjectileId),ke(e,t.tripodLevel)}function kr(e,t){let o={};return o.projectileInfo=Fn(e,t),o}function Er(e,t){Wn(e,t.projectileInfo)}var Ot=15,vr="NewProjectile";function Rr(e,t){let o={};return o.Enable=e.bool(),o.ParalyzationPoint=e.u32(),o.DecreasePoint=e.u32(),o.ParalyzationMaxPoint=e.u32(),o.NoHitCheckTime=e.u32(),o.HitCheckTime=e.u32(),o.ObjectId=e.u64(),o}function Dr(e,t){e.bool(t.Enable),e.u32(t.ParalyzationPoint),e.u32(t.DecreasePoint),e.u32(t.ParalyzationMaxPoint),e.u32(t.NoHitCheckTime),e.u32(t.HitCheckTime),e.u64(t.ObjectId)}var jt=16,Kr="ParalyzationStateNotify";function Zn(e,t){let o={};return o.MaxHp=i(e,t),o.CharacterId=e.u64(),o.Position=f(e,t),o.TransitIndex=e.u32(),o.CurHp=i(e,t),o.CharacterLevel=e.u16(),o.GearLevel=e.u32(),o.ZoneId=e.u32(),o.PartyMemberNumber=e.u8(),o.Name=e.string(20),o.ZoneInstId=e.u64(),o.WorldId=e.u8(),o.ClassId=e.u16(),o.Auths=e.u8(),o}function Vn(e,t){m(e,t.MaxHp),e.u64(t.CharacterId),S(e,t.Position),e.u32(t.TransitIndex),m(e,t.CurHp),e.u16(t.CharacterLevel),e.u32(t.GearLevel),e.u32(t.ZoneId),e.u8(t.PartyMemberNumber),e.string(t.Name,20),e.u64(t.ZoneInstId),e.u8(t.WorldId),e.u16(t.ClassId),e.u8(t.Auths)}function Ar(e,t){let o={};return o.RaidInstanceId=e.u32(),o.LootGrade=e.u32(),o.PartyType=e.u8(),o.PartyInstanceId=e.u32(),o.PartyLootType=e.u8(),o.MemberDatas=e.array(e.u16(),()=>Zn(e,t),40),o}function Ur(e,t){e.u32(t.RaidInstanceId),e.u32(t.LootGrade),e.u8(t.PartyType),e.u32(t.PartyInstanceId),e.u8(t.PartyLootType),e.array(t.MemberDatas,{maxLen:40,lenType:"u16"},o=>{Vn(e,o)})}var Ft=17,hr="PartyInfo";function Lr(e,t){let o={};return o.PartyLeaveType=e.u8(),o.PartyInstanceId=e.u32(),o.Name=e.string(20),o}function Cr(e,t){e.u8(t.PartyLeaveType),e.u32(t.PartyInstanceId),e.string(t.Name,20)}var Wt=18,Br="PartyLeaveResult";function _r(e,t){let o={};return o.ObjectId=e.u64(),o.passiveStatusEffectList=e.array(e.u16(),()=>e.u32(),10),o.Unk0_m=e.u8(),o}function wr(e,t){e.u64(t.ObjectId),e.array(t.passiveStatusEffectList,{maxLen:10,lenType:"u16"},o=>{e.u32(o)}),e.u8(t.Unk0_m)}var Zt=19,Mr="PartyPassiveStatusEffectAddNotify";function Or(e,t){let o={};return o.ObjectId=e.u64(),o.passiveStatusEffectList=e.array(e.u16(),()=>e.u32(),10),o}function jr(e,t){e.u64(t.ObjectId),e.array(t.passiveStatusEffectList,{maxLen:10,lenType:"u16"},o=>{e.u32(o)})}var Vt=20,Fr="PartyPassiveStatusEffectRemoveNotify";function Wr(e,t){let o={};return o.CharacterId=e.u64(),o.statusEffectDatas=e.array(e.u16(),()=>y(e,t),80),o.PlayerIdOnRefresh=e.u64(),o}function Zr(e,t){e.u64(t.CharacterId),e.array(t.statusEffectDatas,{maxLen:80,lenType:"u16"},o=>{d(e,o)}),e.u64(t.PlayerIdOnRefresh)}var zt=21,Vr="PartyStatusEffectAddNotify";function zr(e,t){let o={};return o.CharacterId=e.u64(),o.statusEffectIds=e.array(e.u16(),()=>e.u32(),80),o.Reason=e.u8(),o}function Hr(e,t){e.u64(t.CharacterId),e.array(t.statusEffectIds,{maxLen:80,lenType:"u16"},o=>{e.u32(o)}),e.u8(t.Reason)}var Ht=22,Gr="PartyStatusEffectRemoveNotify";function Yr(e,t){let o={};return o.PartyInstanceId=e.u32(),o.RaidInstanceId=e.u32(),o.CharacterId=e.u64(),o}function $r(e,t){e.u32(t.PartyInstanceId),e.u32(t.RaidInstanceId),e.u64(t.CharacterId)}var Gt=23,qr="PartyStatusEffectResultNotify";function Jr(e,t){let o={};return o.passiveStatusEffectList=e.array(e.u16(),()=>e.u32(),10),o}function Qr(e,t){e.array(t.passiveStatusEffectList,{maxLen:10,lenType:"u16"},o=>{e.u32(o)})}var Yt=24,Xr="PassiveStatusEffectAddNotify";function ti(e,t){let o={};return o.passiveStatusEffectList=e.array(e.u16(),()=>e.u32(),10),o}function ei(e,t){e.array(t.passiveStatusEffectList,{maxLen:10,lenType:"u16"},o=>{e.u32(o)})}var $t=25,oi="PassiveStatusEffectRemoveNotify";function ai(e,t){return{}}function ri(e,t){}var qt=26,ii="RaidBossKillNotify";function ni(e,t){return{}}function si(e,t){}var Jt=27,fi="RaidResult";function zn(e,t){let o={};return o.UnpublishReason=e.u8(),o.ObjectId=e.u64(),o}function Hn(e,t){e.u8(t.UnpublishReason),e.u64(t.ObjectId)}function ui(e,t){let o={};return o.unpublishedObjects=e.array(e.u16(),()=>zn(e,t),200),o}function mi(e,t){e.array(t.unpublishedObjects,{maxLen:200,lenType:"u16"},o=>{Hn(e,o)})}var Qt=28,ci="RemoveObject";function Ae(e,t){let o={};return o.Modifier=e.u8(),o.TargetId=e.u64(),o.DamageType=e.u8(),e.bool()&&(o.DamageAttr=e.u8()),o.CurHp=i(e,t),o.Unk3_m=e.u16(),o.MaxHp=i(e,t),o.Damage=i(e,t),o}function Ue(e,t){e.u8(t.Modifier),e.u64(t.TargetId),e.u8(t.DamageType),e.bool(t.DamageAttr!==void 0)&&e.u8(t.DamageAttr),m(e,t.CurHp),e.u16(t.Unk3_m),m(e,t.MaxHp),m(e,t.Damage)}function Yn(e,t){let o={};return o.SkillMoveOptionData=ve(e,t),o.Destination=f(e,t),o.Position=f(e,t),o.skillDamageEvent=Ae(e,t),o}function $n(e,t){Kn(e,t.SkillMoveOptionData),S(e,t.Destination),S(e,t.Position),Ue(e,t.skillDamageEvent)}function pi(e,t){let o={};return o.SkillId=e.u32(),o.SkillDamageAbnormalMoveEvents=e.array(e.u16(),()=>Yn(e,t),50),o.SkillEffectId=e.u32(),o.SourceId=e.u64(),o}function li(e,t){e.u32(t.SkillId),e.array(t.SkillDamageAbnormalMoveEvents,{maxLen:50,lenType:"u16"},o=>{$n(e,o)}),e.u32(t.SkillEffectId),e.u64(t.SourceId)}var Xt=29,yi="SkillDamageAbnormalMoveNotify";function di(e,t){let o={};return o.SkillLevel=e.u8(),o.SourceId=e.u64(),o.SkillId=e.u32(),o.SkillDamageEvents=e.array(e.u16(),()=>Ae(e,t),50),o.SkillEffectId=e.u32(),o}function bi(e,t){e.u8(t.SkillLevel),e.u64(t.SourceId),e.u32(t.SkillId),e.array(t.SkillDamageEvents,{maxLen:50,lenType:"u16"},o=>{Ue(e,o)}),e.u32(t.SkillEffectId)}var te=30,Si="SkillDamageNotify";function gi(e,t){let o={};return o.SourceId=e.u64(),o.SkillId=e.u32(),o.Stage=e.u8(),o}function Pi(e,t){e.u64(t.SourceId),e.u32(t.SkillId),e.u8(t.Stage)}var ee=31,Ni="SkillStageNotify";function xi(e,t){let o={};return o.SourceId=e.u64(),o.CurDirectionYaw=p(e,t),o.NewDirectionYaw=p(e,t),o.AimTargetPosition=f(e,t),e.bool()&&(o.PitchRotation=p(e,t)),e.bool()&&(o.AiStateId=e.u32()),o.CurPosition=f(e,t),e.bool()&&(o.Unk1_m=e.u32()),o.SkillLevel=e.u8(),o.NewPosition=f(e,t),o.SkillId=e.u32(),o.SkillOptionData=Re(e,t),o}function Ti(e,t){e.u64(t.SourceId),N(e,t.CurDirectionYaw),N(e,t.NewDirectionYaw),S(e,t.AimTargetPosition),e.bool(t.PitchRotation!==void 0)&&N(e,t.PitchRotation),e.bool(t.AiStateId!==void 0)&&e.u32(t.AiStateId),S(e,t.CurPosition),e.bool(t.Unk1_m!==void 0)&&e.u32(t.Unk1_m),e.u8(t.SkillLevel),S(e,t.NewPosition),e.u32(t.SkillId),hn(e,t.SkillOptionData)}var oe=32,Ii="SkillStartNotify";function ki(e,t){let o={};return o.statusEffectData=y(e,t),o.ObjectId=e.u64(),o.New=e.bool(),o}function Ei(e,t){d(e,t.statusEffectData),e.u64(t.ObjectId),e.bool(t.New)}var ae=34,vi="StatusEffectAddNotify";function Ri(e,t){let o={};return o.statusEffectIds=e.array(e.u16(),()=>e.u32(),80),o.ObjectId=e.u64(),o.Reason=e.u8(),o}function Di(e,t){e.array(t.statusEffectIds,{maxLen:80,lenType:"u16"},o=>{e.u32(o)}),e.u64(t.ObjectId),e.u8(t.Reason)}var re=35,Ki="StatusEffectRemoveNotify";function Ai(e,t){let o={};return o.EffectInstanceId=e.u32(),o.TargetId=e.u64(),o.ExpirationTick=e.u64(),o}function Ui(e,t){e.u32(t.EffectInstanceId),e.u64(t.TargetId),e.u64(t.ExpirationTick)}var ie=36,hi="StatusEffectDurationNotify";function Li(e,t){let o={};return o.ObjectId=e.u64(),o.EffectInstanceId=e.u32(),o.CharacterId=e.u64(),o.Value=e.u32(),o}function Ci(e,t){e.u64(t.ObjectId),e.u32(t.EffectInstanceId),e.u64(t.CharacterId),e.u32(t.Value)}var ne=37,Bi="StatusEffectSyncDataNotify";function _i(e,t){let o={};return o.Step=e.u32(),o.Unk2_m=e.bool(),o.TriggerId=e.u32(),o}function wi(e,t){e.u32(t.Step),e.bool(t.Unk2_m),e.u32(t.TriggerId)}var se=38,Mi="TriggerBossBattleStatus";function Oi(e,t){let o={};return o.PacketResultCode=e.u32(),o.TriggerId=e.u32(),o.Unk0_m=e.u32(),o.InvolvedPCs=e.array(e.u16(),()=>e.u64(),40),o}function ji(e,t){e.u32(t.PacketResultCode),e.u32(t.TriggerId),e.u32(t.Unk0_m),e.array(t.InvolvedPCs,{maxLen:40,lenType:"u16"},o=>{e.u64(o)})}var fe=39,Fi="TriggerFinishNotify";function Wi(e,t){let o={};return o.TriggerId=e.u32(),o.TriggerSignalType=e.u32(),o.SourceId=e.u64(),o.InvolvedPCs=e.array(e.u16(),()=>e.u64(),40),o}function Zi(e,t){e.u32(t.TriggerId),e.u32(t.TriggerSignalType),e.u64(t.SourceId),e.array(t.InvolvedPCs,{maxLen:40,lenType:"u16"},o=>{e.u64(o)})}var ue=40,Vi="TriggerStartNotify";function zi(e,t){let o={};return o.MaxHp=i(e,t),o.CharacterId=e.u64(),o.Unk0_m=e.u32(),o.statusEffectDatas=e.array(e.u16(),()=>y(e,t),80),o.Position=e.u64(),o.CurHp=i(e,t),o}function Hi(e,t){m(e,t.MaxHp),e.u64(t.CharacterId),e.u32(t.Unk0_m),e.array(t.statusEffectDatas,{maxLen:80,lenType:"u16"},o=>{d(e,o)}),e.u64(t.Position),m(e,t.CurHp)}var me=41,Gi="TroopMemberUpdateMinNotify";function Yi(e,t){let o={};return o.IdentityGauge1=e.u32(),o.IdentityGauge2=e.u32(),o.IdentityGauge3=e.u32(),o.PlayerId=e.u64(),o}function $i(e,t){e.u32(t.IdentityGauge1),e.u32(t.IdentityGauge2),e.u32(t.IdentityGauge3),e.u64(t.PlayerId)}var ce=42,qi="IdentityGaugeChangeNotify";function Ji(e,t){let o={};return o.ObjectId=e.u64(),o}function Qi(e,t){e.u64(t.ObjectId)}var pe=43,Xi="ZoneObjectUnpublishNotify";function qn(e,t){let o={};return o.StackCount=e.u8(),o.Target=e.u8(),o.Id=e.u32(),o}function Jn(e,t){e.u8(t.StackCount),e.u8(t.Target),e.u32(t.Id)}function tn(e,t){let o={};return o.zoneStatusEffectDataList=e.array(e.u16(),()=>qn(e,t),4),o}function en(e,t){e.array(t.zoneStatusEffectDataList,{maxLen:4,lenType:"u16"},o=>{Jn(e,o)})}var le=44,on="ZoneStatusEffectAddNotify";function an(e,t){let o={};return o.StatusEffectId=e.u32(),o}function rn(e,t){e.u32(t.StatusEffectId)}var ye=45,nn="ZoneStatusEffectRemoveNotify";function sn(e,t){let o={};return o.SkillLevel=e.u8(),o.Caster=e.u64(),o.SkillId=e.u32(),o}function fn(e,t){e.u8(t.SkillLevel),e.u64(t.Caster),e.u32(t.SkillId)}var de=46,un="SkillCastNotify";var Xn=new Map([[L,[Et]],[C,[vt]],[B,[Rt]],[_,[Dt]],[w,[Kt]],[M,[At]],[O,[Ut]],[j,[ht]],[F,[Lt]],[W,[Ct]],[Z,[Bt]],[z,[_t]],[H,[wt]],[G,[Mt]],[Y,[Ot]],[$,[jt]],[q,[Ft]],[J,[Wt]],[Q,[Zt]],[X,[Vt]],[tt,[zt]],[et,[Ht]],[ot,[Gt]],[at,[Yt]],[rt,[$t]],[it,[qt]],[nt,[Jt]],[st,[Qt]],[ut,[Xt]],[mt,[te]],[ct,[ee]],[pt,[oe]],[lt,[ae]],[yt,[re]],[dt,[ie]],[bt,[ne]],[St,[se]],[gt,[fe]],[Pt,[ue]],[Nt,[me]],[xt,[ce]],[Tt,[pe]],[It,[le]],[kt,[ye]],[ft,[de]]]);var mn=new Map([[Et,[Ma,_a,wa]],[vt,[Fa,Oa,ja]],[Rt,[Va,Wa,Za]],[Dt,[Ga,za,Ha]],[Kt,[qa,Ya,$a]],[At,[Xa,Ja,Qa]],[Ut,[or,tr,er]],[ht,[ir,ar,rr]],[Lt,[fr,nr,sr]],[Ct,[cr,ur,mr]],[Bt,[yr,pr,lr]],[_t,[Sr,dr,br]],[wt,[Nr,gr,Pr]],[Mt,[Ir,xr,Tr]],[Ot,[vr,kr,Er]],[jt,[Kr,Rr,Dr]],[Ft,[hr,Ar,Ur]],[Wt,[Br,Lr,Cr]],[Zt,[Mr,_r,wr]],[Vt,[Fr,Or,jr]],[zt,[Vr,Wr,Zr]],[Ht,[Gr,zr,Hr]],[Gt,[qr,Yr,$r]],[Yt,[Xr,Jr,Qr]],[$t,[oi,ti,ei]],[qt,[ii,ai,ri]],[Jt,[fi,ni,si]],[Qt,[ci,ui,mi]],[Xt,[yi,pi,li]],[te,[Si,di,bi]],[ee,[Ni,gi,Pi]],[oe,[Ii,xi,Ti]],[ae,[vi,ki,Ei]],[re,[Ki,Ri,Di]],[ie,[hi,Ai,Ui]],[ne,[Bi,Li,Ci]],[se,[Mi,_i,wi]],[fe,[Fi,Oi,ji]],[ue,[Vi,Wi,Zi]],[me,[Gi,zi,Hi]],[ce,[qi,Yi,$i]],[pe,[Xi,Ji,Qi]],[le,[on,tn,en]],[ye,[nn,an,rn]],[de,[un,sn,fn]]]);var Os=require("tiny-typed-emitter");var he=class{#e;#t;#o;#a;#r;#i;constructor(t,o,a,n,s,u){this.#e=t,this.#t=o,this.#o=a,this.#a=n,this.#r=s,this.#i=u}#n;get parsed(){if(!this.#n)try{this.#n=this.#i(this.#r.decrypt(this.#e,this.#t,this.#o,this.#a))}catch(t){console.error(`[meter-core/pkt-stream] - ${t}`);return}return this.#n}};var be=class{time;#e;#t;#o;#a;constructor(...t){if(t.length===5){let[o,a,n,s,u]=t;this.#t=o,this.time=n,this.#e=a,this.#o=s,this.#a=u}else if(t.length===3){let[o,a,n]=t;this.#t=Buffer.alloc(0),this.time=new Date,this.#e=a,this.#o=()=>o,this.#a=n}else throw new Error("[meter-core/logger/parser] - LogEvent<T>: Invalid constructor arguments")}#r;get parsed(){if(!this.#r)try{this.#r=this.#o(new r(this.#t))}catch(t){console.error(`[meter-core/logger/parser] - parsed - ${t}`);return}return this.#r}#i;get serialized(){if(!this.#i)try{if(!this.parsed)return;let t=new Ne;t.skip(pn),this.#a(t,this.parsed);let o=t.value;o.writeUint16LE(o.length,es),o.writeUint16LE(this.#e,Ce),o.writeUintLE(+new Date,cn,Be),this.#i=t.value}catch(t){console.error(`[meter-core/logger/parser] - serialized - ${t}`);return}return this.#i}},Se=6,ts=2,es=0,Le=2,Ce=es+ts,Be=6,cn=Ce+Le,pn=ts+Le+Be;var rs=require("fs");var _e=class{buffer;position;out;constructor(){this.buffer=null,this.position=0,this.out=[]}write(t){for(;t.length>0;){if(this.buffer){if(this.buffer.length<2){let n=this.buffer[0],s=(t[0]<<8)+n;this.buffer=Buffer.alloc(s),this.buffer[0]=n,this.position=1}let a=Math.min(t.length,this.buffer.length-this.position);t.copy(this.buffer,this.position,0,a),this.position+=a,this.position===this.buffer.length&&(this.out.push(this.buffer),this.buffer=null,this.position=0),t=t.subarray(a);continue}if(t.length<2){this.buffer=Buffer.from(t),this.position=t.length;break}let o=t.readUInt16LE(0);if(o===0){this.buffer=null;return}if(o>t.length){this.buffer=Buffer.alloc(o),t.copy(this.buffer),this.position=t.length;break}this.out.push(t.subarray(0,o)),t=t.subarray(o)}}read(){return this.out.shift()}};var is=require("fs");var ge=class extends as.TypedEmitter{},ln=class extends ge{#e;#t;constructor(t,o,a){super(),this.#e=o,a&&(this.#t=(0,rs.createWriteStream)(a,{highWaterMark:0}));let n=Buffer.allocUnsafe(Se);n.writeUIntLE(0,0,Se),this.#t?.write(n),t.on("*",this.handlePkt.bind(this))}handlePkt(t,o,a,n){try{let s=Ca.get(o),u=Xn.get(o);if(s&&u){let[b]=u,[k,x]=s,h=mn.get(b);if(h){let[Pe,Fs,ns]=h,dn=new he(Buffer.from(t),o,a,!!n,this.#e,x).parsed;if(!dn)return;let we=new be(dn,b,ns);this.emit(Pe,we),this.emit("*",Pe,we),this.appendLog(we)}}}catch(s){console.error(s)}}appendLog(t){this.#t&&t.serialized&&this.#t.write(t.serialized)}},yn=class extends ge{readLogByChunk(t){let o=new _e,a=(0,is.createReadStream)(t),n=!1,s;a.on("data",u=>{if(s===void 0){if(s=this.readVersion(u),s>0){a.destroy();return}u=u.subarray(Se)}o.write(u);let b;for(;b=o.read();)this.readLogChunk(b,s)}).on("end",()=>{n=!0,this.emit("fileEnd","end")}).on("close",()=>{n||this.emit("fileEnd","closed")})}readLogChunk(t,o){try{if(t.length<8)return!1;let a=t.readUIntLE(Ce,Le),n=new Date(t.readUintLE(cn,Be)),s=t.subarray(pn),u=mn.get(a);if(u){let[b,k,x]=u,h=new be(s,a,new Date(n),Pe=>k(Pe,o),x);this.emit(b,h),this.emit("*",b,h)}}catch(a){console.error(a)}}readVersion(t){return t.readUintLE(0,Se)}};0&&(module.exports={LiveLogger,Logger,ReplayLogger});
