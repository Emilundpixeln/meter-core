import{uncompressSync as f}from"lz4-napi";import t from"oodle";import{uncompressSync as c}from"snappy";var n=class{oodle;xorTable;constructor(r,e){if(this.oodle=new t.Oodle(r),e.length!=256)throw new Error("Invalid xorTable length");this.xorTable=e}decrypt(r,e,o,s){switch(s&&this.xor(r,e),o){case 0:return r.subarray(16);case 1:return f(r).subarray(16);case 2:return c(r).subarray(16);case 3:{let u=r.readUInt32LE(0),l=Buffer.alloc(u);return r=this.oodle.decode(r.subarray(4),l),r.subarray(16)}default:throw new Error(`Unknown compression: ${o}`)}}xor(r,e){for(let o=0;o<r.length;o++)r[o]^=this.xorTable[e++%256]}};export{n as Decompressor};
