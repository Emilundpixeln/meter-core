import{uncompressSync as a}from"lz4-napi";import c from"oodle";import{uncompress as i}from"snappyjs";var l=class{oodle;xorTable;logerror;constructor(e,o,r){if(this.oodle=new c.Oodle(e),o.length!=256)throw new Error("Invalid xorTable length");this.xorTable=o,this.logerror=r}decrypt(e,o,r,s){s&&this.xor(e,o);let n;switch(r){case 0:{n=e;break}case 1:{n=a(e);break}case 2:{n=i(e);break}case 3:{let t=e.readUInt32LE(0);if(e.length<4)throw new Error(`Invalid oodle packet: size=${e.length}, comp=${r}, opcode=${o}`);n=this.oodle.decode(e.subarray(4),t);break}default:throw new Error(`Unknown compression: ${r}`)}if(n.length<16)throw new Error(`Invalid packet: size=${n.length}, comp=${r}, opcode=${o}`);return n.subarray(16)}xor(e,o){for(let r=0;r<e.length;r++)e[r]^=this.xorTable[o++%256]}};export{l as Decompressor};
