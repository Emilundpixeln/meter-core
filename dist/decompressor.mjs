import{uncompressSync as u}from"lz4-napi";import a from"oodle";import{uncompress as f}from"snappyjs";var n=class{oodle;xorTable;logerror;constructor(r,e,o){if(this.oodle=new a.Oodle(r),e.length!=256)throw new Error("Invalid xorTable length");this.xorTable=e,this.logerror=o}decrypt(r,e,o,s){switch(s&&this.xor(r,e),o){case 0:return r.subarray(16);case 1:return u(r).subarray(16);case 2:return f(r).subarray(16);case 3:{let l=r.readUInt32LE(0),t=Buffer.alloc(l);return r=this.oodle.decode(r.subarray(4),t),r.subarray(16)}default:throw new Error(`Unknown compression: ${o}`)}}xor(r,e){for(let o=0;o<r.length;o++)r[o]^=this.xorTable[e++%256]}};export{n as Decompressor};
