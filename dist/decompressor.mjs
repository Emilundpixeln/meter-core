import{uncompressSync as l}from"lz4-napi";import t from"oodle";import{uncompressSync as c}from"snappy";var s=class{oodle;xorTable;constructor(r,e){if(this.oodle=new t.Oodle(r),e.length!=256)throw new Error("Invalid xorTable length");this.xorTable=e}decrypt(r,e=0,o=0,n=0){switch(n&&this.xor(r,e),o){case 0:return r.subarray(16);case 1:return l(r).subarray(16);case 2:return c(r).subarray(16);case 3:{let u=r.readUInt32LE(0),f=Buffer.alloc(u);return r=this.oodle.decode(r.subarray(4),f),r.subarray(16)}default:throw new Error(`Unknown compression: ${o}`)}}xor(r,e){for(let o=0;o<r.length;o++)r[o]^=this.xorTable[e++%256]}};export{s as Decompressor};
