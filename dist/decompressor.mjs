import"./chunk-K7C7TUE5.mjs";import{uncompressSync as t}from"lz4-napi";import c from"oodle";import{uncompress as f}from"snappyjs";var l=class{oodle;xorTable;constructor(e,r){if(this.oodle=new c.Oodle(e),r.length!=256)throw new Error("Invalid xorTable length");this.xorTable=r}decrypt(e,r,o,s){s&&this.xor(e,r);let n;switch(o){case 0:{n=e;break}case 1:{n=t(e);break}case 2:{n=f(e);break}case 3:{if(e.length<4)throw new Error(`Invalid oodle packet: size=${e.length}, comp=${o}, opcode=${r}`);n=this.oodle.decode(e.subarray(4),e.readUInt32LE(0));break}default:throw new Error(`Unknown compression: ${o}`)}if(n.length<16)throw new Error(`Invalid packet: size=${n.length}, comp=${o}, opcode=${r}`);return n.subarray(16)}xor(e,r){for(let o=0;o<e.length;o++)e[o]^=this.xorTable[r++%256]}};export{l as Decompressor};
