"use strict";var m=Object.create;var t=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var d=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var w=(o,e)=>{for(var r in e)t(o,r,{get:e[r],enumerable:!0})},c=(o,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of b(e))!g.call(o,l)&&l!==r&&t(o,l,{get:()=>e[l],enumerable:!(n=p(e,l))||n.enumerable});return o};var y=(o,e,r)=>(r=o!=null?m(d(o)):{},c(e||!o||!o.__esModule?t(r,"default",{value:o,enumerable:!0}):r,o)),k=o=>c(t({},"__esModule",{value:!0}),o);var $={};w($,{Decompressor:()=>a});module.exports=k($);var i=require("lz4-napi"),f=y(require("oodle")),h=require("snappyjs"),a=class{oodle;xorTable;logerror;constructor(e,r,n){if(this.oodle=new f.default.Oodle(e),r.length!=256)throw new Error("Invalid xorTable length");this.xorTable=r,this.logerror=n}decrypt(e,r,n,l){l&&this.xor(e,r);let s;switch(n){case 0:{s=e;break}case 1:{s=(0,i.uncompressSync)(e);break}case 2:{s=(0,h.uncompress)(e);break}case 3:{let u=e.readUInt32LE(0);if(e.length<4)throw new Error(`Invalid oodle packet: size=${e.length}, comp=${n}, opcode=${r}`);s=this.oodle.decode(e.subarray(4),u);break}default:throw new Error(`Unknown compression: ${n}`)}if(s.length<16)throw new Error(`Invalid packet: size=${s.length}, comp=${n}, opcode=${r}`);return s.subarray(16)}xor(e,r){for(let n=0;n<e.length;n++)e[n]^=this.xorTable[r++%256]}};0&&(module.exports={Decompressor});
