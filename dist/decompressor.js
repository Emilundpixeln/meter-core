"use strict";var a=Object.create;var f=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var B=(e,r)=>{for(var o in r)f(e,o,{get:r[o],enumerable:!0})},u=(e,r,o,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of p(r))!w.call(e,s)&&s!==o&&f(e,s,{get:()=>r[s],enumerable:!(n=m(r,s))||n.enumerable});return e};var d=(e,r,o)=>(o=e!=null?a(b(e)):{},u(r||!e||!e.__esModule?f(o,"default",{value:e,enumerable:!0}):o,e)),x=e=>u(f({},"__esModule",{value:!0}),e);var g={};B(g,{Decompressor:()=>t});module.exports=x(g);var l=require("lz4-napi"),c=d(require("oodle")),i=require("snappy"),t=class{oodle;xorTable;constructor(r,o){if(this.oodle=new c.default.Oodle(r),o.length!=256)throw new Error("Invalid xorTable length");this.xorTable=o}decrypt(r,o=0,n=0,s=0){if(s>1)throw new Error(`Weird xor?: ${s}`);switch(s&&this.xor(r,o),n){case 0:return r.subarray(16);case 1:return(0,l.uncompressSync)(r).subarray(16);case 2:return(0,i.uncompressSync)(r).subarray(16);case 3:{let h=r.readUInt32LE(0),y=Buffer.alloc(h);return r=this.oodle.decode(r.subarray(4),y),r.subarray(16)}default:throw new Error(`Unknown compression: ${n}`)}}xor(r,o){for(let n=0;n<r.length;n++)r[n]^=this.xorTable[o++%256]}};0&&(module.exports={Decompressor});
