import{a}from"./chunk-MLEMKYRO.mjs";import"./chunk-RYE4PZCG.mjs";import"./chunk-EFM4SUD6.mjs";import"./chunk-RVEUDURD.mjs";import"./chunk-REJVTTFE.mjs";import{TypedEmitter as h}from"tiny-typed-emitter";var c=class extends h{#e;constructor(e){super(),this.#e=e}read(e){try{if(e.length<6)return!1;let r=e.readUInt8(5);if(r>2)return!1;let t=e.readUInt8(4);if(t>3)return!1;let o=e.subarray(6),s=e.readUInt16LE(2),n=a.get(s);if(n){let[p,f]=n;this.emit(p,new i(o,s,t,Boolean(r),this.#e,f))}this.emit("*",o,s,t,Boolean(r))}catch{return!1}}},i=class{#e;#s;#o;#n;#r;#i;constructor(e,r,t,o,s,n){this.#e=e,this.#s=r,this.#o=t,this.#n=o,this.#r=s,this.#i=n}#t;get parsed(){if(!this.#t)try{this.#t=this.#i(this.#r.decrypt(this.#e,this.#s,this.#o,this.#n))}catch(e){this.#r.logErrorFunc(e);return}return this.#t}};export{i as PKT,c as PKTStream};
