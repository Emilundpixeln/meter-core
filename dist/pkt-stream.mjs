import{a as i}from"./chunk-MLEMKYRO.mjs";import"./chunk-RYE4PZCG.mjs";import"./chunk-EFM4SUD6.mjs";import"./chunk-RVEUDURD.mjs";import"./chunk-REJVTTFE.mjs";import{TypedEmitter as h}from"tiny-typed-emitter";var c=class extends h{#e;constructor(e){super(),this.#e=e}read(e){try{if(e.length<6)return!1;let r=e.readUInt8(5);if(r>2)return!1;let t=e.readUInt8(4);if(t>3)return!1;let o=e.subarray(6),s=e.readUInt16LE(2),n=i.get(s);if(n){let[p,f]=n;this.emit(p,new a(o,s,t,Boolean(r),this.#e,f))}this.emit("*",o,s,t,Boolean(r))}catch{return!1}}},a=class{#e;#t;#s;#o;#n;#a;constructor(e,r,t,o,s,n){this.#e=e,this.#t=r,this.#s=t,this.#o=o,this.#n=s,this.#a=n}#r;get parsed(){if(!this.#r)try{this.#r=this.#a(this.#n.decrypt(this.#e,this.#t,this.#s,this.#o))}catch(e){console.error(`[meter-core/pkt-stream] - ${e}`);return}return this.#r}};export{a as PKT,c as PKTStream};
